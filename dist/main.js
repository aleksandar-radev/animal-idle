!function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,i){"use strict";var T=i(5),w=i(8);function b(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=n,e.resolve=function(t,e){return n(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?n(t,!1,!0).resolveObject(e):e},e.format=function(t){w.isString(t)&&(t=n(t));return t instanceof b?t.format():b.prototype.format.call(t)},e.Url=b;var A=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,O=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,e=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),I=["'"].concat(e),R=["%","/","?",";","#"].concat(I),S=["/","?","#"],P=/^[+a-z0-9A-Z_-]{0,63}$/,C=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,M={javascript:!0,"javascript:":!0},N={javascript:!0,"javascript:":!0},L={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},D=i(9);function n(t,e,i){if(t&&w.isObject(t)&&t instanceof b)return t;var r=new b;return r.parse(t,e,i),r}b.prototype.parse=function(t,e,i){if(!w.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),r=-1!==r&&r<t.indexOf("#")?"?":"#",n=t.split(r);n[0]=n[0].replace(/\\/g,"/");var s=(s=t=n.join(r)).trim();if(!i&&1===t.split("#").length){n=O.exec(s);if(n)return this.path=s,this.href=s,this.pathname=n[1],n[2]?(this.search=n[2],this.query=e?D.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var o,r=A.exec(s);if(r&&(o=(r=r[0]).toLowerCase(),this.protocol=o,s=s.substr(r.length)),!(i||r||s.match(/^\/\/[^@\/]+@[^@\/]+/))||!(x="//"===s.substr(0,2))||r&&N[r]||(s=s.substr(2),this.slashes=!0),!N[r]&&(x||r&&!L[r])){for(var a=-1,h=0;h<S.length;h++)-1!==(u=s.indexOf(S[h]))&&(-1===a||u<a)&&(a=u);-1!==(t=-1===a?s.lastIndexOf("@"):s.lastIndexOf("@",a))&&(n=s.slice(0,t),s=s.slice(t+1),this.auth=decodeURIComponent(n));for(var u,a=-1,h=0;h<R.length;h++)-1!==(u=s.indexOf(R[h]))&&(-1===a||u<a)&&(a=u);-1===a&&(a=s.length),this.host=s.slice(0,a),s=s.slice(a),this.parseHost(),this.hostname=this.hostname||"";i="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!i)for(var l=this.hostname.split(/\./),h=0,c=l.length;h<c;h++){var d=l[h];if(d&&!d.match(P)){for(var p="",f=0,m=d.length;f<m;f++)127<d.charCodeAt(f)?p+="x":p+=d[f];if(!p.match(P)){var y=l.slice(0,h),_=l.slice(h+1),v=d.match(C);v&&(y.push(v[1]),_.unshift(v[2])),_.length&&(s="/"+_.join(".")+s),this.hostname=y.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),i||(this.hostname=T.toASCII(this.hostname));var g=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+g,this.href+=this.host,i&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!M[o])for(h=0,c=I.length;h<c;h++){var b,E=I[h];-1!==s.indexOf(E)&&((b=encodeURIComponent(E))===E&&(b=escape(E)),s=s.split(E).join(b))}r=s.indexOf("#"),-1!==r&&(this.hash=s.substr(r),s=s.slice(0,r)),t=s.indexOf("?");return-1!==t?(this.search=s.substr(t),this.query=s.substr(t+1),e&&(this.query=D.parse(this.query)),s=s.slice(0,t)):e&&(this.search="",this.query={}),s&&(this.pathname=s),L[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(g=this.pathname||"",n=this.search||"",this.path=g+n),this.href=this.format(),this},b.prototype.format=function(){var t=this.auth||"",e=(t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@"),this.protocol||""),i=this.pathname||"",r=this.hash||"",n=!1,s="",t=(this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&w.isObject(this.query)&&Object.keys(this.query).length&&(s=D.stringify(this.query)),this.search||s&&"?"+s||"");return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||L[e])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n=n||"",r&&"#"!==r.charAt(0)&&(r="#"+r),t&&"?"!==t.charAt(0)&&(t="?"+t),e+n+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(t=t.replace("#","%23"))+r},b.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},b.prototype.resolveObject=function(t){w.isString(t)&&((d=new b).parse(t,!1,!0),t=d);for(var e=new b,i=Object.keys(this),r=0;r<i.length;r++){var n=i[r];e[n]=this[n]}if(e.hash=t.hash,""===t.href)e.href=e.format();else if(t.slashes&&!t.protocol){for(var s=Object.keys(t),o=0;o<s.length;o++){var a=s[o];"protocol"!==a&&(e[a]=t[a])}L[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format()}else if(t.protocol&&t.protocol!==e.protocol)if(L[t.protocol]){if(e.protocol=t.protocol,t.host||N[t.protocol])e.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),e.pathname=h.join("/")}e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(d=e.pathname||"",p=e.search||"",e.path=d+p),e.slashes=e.slashes||t.slashes,e.href=e.format()}else{for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];e[c]=t[c]}e.href=e.format()}else{var d=e.pathname&&"/"===e.pathname.charAt(0),p=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=p||d||e.host&&t.pathname,f=d,m=e.pathname&&e.pathname.split("/")||[],h=t.pathname&&t.pathname.split("/")||[],y=e.protocol&&!L[e.protocol];if(y&&(e.hostname="",e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),d=d&&(""===h[0]||""===m[0])),p)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,m=h;else if(h.length)(m=m||[]).pop(),m=m.concat(h),e.search=t.search,e.query=t.query;else if(!w.isNullOrUndefined(t.search))return y&&(e.hostname=e.host=m.shift(),(x=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=x.shift(),e.host=e.hostname=x.shift())),e.search=t.search,e.query=t.query,w.isNull(e.pathname)&&w.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(m.length){for(var _=m.slice(-1)[0],p=(e.host||t.host||1<m.length)&&("."===_||".."===_)||""===_,v=0,g=m.length;0<=g;g--)"."===(_=m[g])?m.splice(g,1):".."===_?(m.splice(g,1),v++):v&&(m.splice(g,1),v--);if(!d&&!f)for(;v--;)m.unshift("..");!d||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),p&&"/"!==m.join("/").substr(-1)&&m.push("");var x,f=""===m[0]||m[0]&&"/"===m[0].charAt(0);y&&(e.hostname=e.host=!f&&m.length?m.shift():"",(x=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=x.shift(),e.host=e.hostname=x.shift())),(d=d||e.host&&m.length)&&!f&&m.unshift(""),m.length?e.pathname=m.join("/"):(e.pathname=null,e.path=null),w.isNull(e.pathname)&&w.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format()}else e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format()}return e},b.prototype.parseHost=function(){var t=this.host,e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]);var o=a;function a(t,e,i){void 0===e&&(e=!1),s(this,a),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}function h(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}r(u,[{key:"handlers",value:function(){var t=this._head;if(!(arguments.length<=0||void 0===arguments[0])&&arguments[0])return!!t;for(var e=[];t;)e.push(t),t=t._next;return e}},{key:"has",value:function(t){if(t instanceof o)return t._owner===this;throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.")}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return h(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return h(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(t instanceof o)return t._owner===this&&(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this;throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.")}},{key:"detachAll",value:function(){var t=this._head;if(t)for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]);r=u;function u(){s(this,u),this._head=this._tail=void 0}r.MiniSignalBinding=o,e.default=r,t.exports=e.default},function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,p="~";function n(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,r,n){if("function"!=typeof i)throw new TypeError("The listener must be a function");i=new s(i,r||t,n),r=p?p+e:e;return t._events[r]?t._events[r].fn?t._events[r]=[t._events[r],i]:t._events[r].push(i):(t._events[r]=i,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(p=!1)),a.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(p?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var t=p?p+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,r=e.length,n=new Array(r);i<r;i++)n[i]=e[i].fn;return n},a.prototype.listenerCount=function(t){t=p?p+t:t,t=this._events[t];return t?t.fn?1:t.length:0},a.prototype.emit=function(t,e,i,r,n,s){var o=p?p+t:t;if(!this._events[o])return!1;var a,h=this._events[o],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,r),!0;case 5:return h.fn.call(h.context,e,i,r,n),!0;case 6:return h.fn.call(h.context,e,i,r,n,s),!0}for(d=1,a=new Array(u-1);d<u;d++)a[d-1]=arguments[d];h.fn.apply(h.context,a)}else for(var l,c=h.length,d=0;d<c;d++)switch(h[d].once&&this.removeListener(t,h[d].fn,void 0,!0),u){case 1:h[d].fn.call(h[d].context);break;case 2:h[d].fn.call(h[d].context,e);break;case 3:h[d].fn.call(h[d].context,e,i);break;case 4:h[d].fn.call(h[d].context,e,i,r);break;default:if(!a)for(l=1,a=new Array(u-1);l<u;l++)a[l-1]=arguments[l];h[d].fn.apply(h[d].context,a)}return!0},a.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,i,r){t=p?p+t:t;if(this._events[t])if(e){var n=this._events[t];if(n.fn)n.fn!==e||r&&!n.once||i&&n.context!==i||h(this,t);else{for(var s=0,o=[],a=n.length;s<a;s++)(n[s].fn!==e||r&&!n[s].once||i&&n[s].context!==i)&&o.push(n[s]);o.length?this._events[t]=1===o.length?o[0]:o:h(this,t)}}else h(this,t);return this},a.prototype.removeAllListeners=function(t){return t?(t=p?p+t:t,this._events[t]&&h(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=p,t.exports=a.EventEmitter=a},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,n,s,o,a,h=e&&e.length,u=h?e[0]*i:t.length,l=m(t,0,u,i,!0),c=[];if(l&&l.next!==l.prev){if(h&&(l=function(t,e,i,r){var n,s,o,a,h=[];for(n=0,s=e.length;n<s;n++)a=e[n]*r,o=n<s-1?e[n+1]*r:t.length,(a=m(t,a,o,r,!1))===a.next&&(a.steiner=!0),h.push(function(t){var e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next,e!==t;);return i}(a));for(h.sort(y),n=0;n<h.length;n++)i=function(t,e){var i=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&o<a&&(o=a,i=r.x<r.next.x?r:r.next,a===n))return i}}while(r=r.next,r!==e);if(!i)return null;var h,u=i,l=i.x,c=i.y,d=1/0;r=i;for(;n>=r.x&&r.x>=l&&n!==r.x&&R(s<c?n:o,s,l,c,s<c?o:n,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(n-r.x),M(r,t)&&(h<d||h===d&&(r.x>i.x||r.x===i.x&&function(t,e){return S(t.prev,t,e.prev)<0&&S(e.next,t,t.next)<0}(i,r)))&&(i=r,d=h)),r=r.next,r!==u;);return i}(t,e);if(!i)return e;e=N(i,t);return A(e,e.next),A(i,i.next)}(h[n],i);return i}(t,e,l,i)),t.length>80*i){for(var d=r=t[0],p=n=t[1],f=i;f<u;f+=i)(s=t[f])<d&&(d=s),(o=t[f+1])<p&&(p=o),r<s&&(r=s),n<o&&(n=o);a=0!==(a=Math.max(r-d,n-p))?32767/a:0}O(l,c,i,d,p,a,0)}return c}function m(t,e,i,r,n){var s,o;if(n===0<_(t,e,i,r))for(s=e;s<i;s+=r)o=a(s,t[s],t[s+1],o);else for(s=i-r;e<=s;s-=r)o=a(s,t[s],t[s+1],o);return o&&P(o,o.next)&&(L(o),o=o.next),o}function A(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!P(r,r.next)&&0!==S(r.prev,r,r.next))r=r.next;else{if(L(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function O(t,e,i,r,n,s,o){if(t){if(!o&&s){for(var a=t,h=r,u=n,l=s,c=a;0===c.z&&(c.z=I(c.x,c.y,h,u,l)),c.prevZ=c.prev,c.nextZ=c.next,(c=c.next)!==a;);c.prevZ.nextZ=null,c.prevZ=null;var d,p,f,m,y,_,v,g,x=c,b=1;do{for(p=x,y=x=null,_=0;p;){for(_++,f=p,d=v=0;d<b&&(v++,f=f.nextZ);d++);for(g=b;0<v||0<g&&f;)0!==v&&(0===g||!f||p.z<=f.z)?(p=(m=p).nextZ,v--):(f=(m=f).nextZ,g--),y?y.nextZ=m:x=m,m.prevZ=y,y=m;p=f}}while(y.nextZ=null,b*=2,1<_)}for(var E,T,w=t;t.prev!==t.next;)if(E=t.prev,T=t.next,s?function(t,e,i,r){var n=t.prev,s=t,o=t.next;if(0<=S(n,s,o))return;var a=n.x,h=s.x,u=o.x,l=n.y,c=s.y,d=o.y,p=a<h?a<u?a:u:h<u?h:u,f=l<c?l<d?l:d:c<d?c:d,m=h<a?u<a?a:u:u<h?h:u,y=c<l?d<l?l:d:d<c?c:d,_=I(p,f,e,i,r),v=I(m,y,e,i,r),g=t.prevZ,x=t.nextZ;for(;g&&g.z>=_&&x&&x.z<=v;){if(g.x>=p&&g.x<=m&&g.y>=f&&g.y<=y&&g!==n&&g!==o&&R(a,l,h,c,u,d,g.x,g.y)&&0<=S(g.prev,g,g.next))return;if(g=g.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=y&&x!==n&&x!==o&&R(a,l,h,c,u,d,x.x,x.y)&&0<=S(x.prev,x,x.next))return;x=x.nextZ}for(;g&&g.z>=_;){if(g.x>=p&&g.x<=m&&g.y>=f&&g.y<=y&&g!==n&&g!==o&&R(a,l,h,c,u,d,g.x,g.y)&&0<=S(g.prev,g,g.next))return;g=g.prevZ}for(;x&&x.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=y&&x!==n&&x!==o&&R(a,l,h,c,u,d,x.x,x.y)&&0<=S(x.prev,x,x.next))return;x=x.nextZ}return 1}(t,r,n,s):function(t){var e=t.prev,i=t,t=t.next;if(0<=S(e,i,t))return;var r=e.x,n=i.x,s=t.x,o=e.y,a=i.y,h=t.y,u=r<n?r<s?r:s:n<s?n:s,l=o<a?o<h?o:h:a<h?a:h,c=n<r?s<r?r:s:s<n?n:s,d=a<o?h<o?o:h:h<a?a:h,p=t.next;for(;p!==e;){if(p.x>=u&&p.x<=c&&p.y>=l&&p.y<=d&&R(r,o,n,a,s,h,p.x,p.y)&&0<=S(p.prev,p,p.next))return;p=p.next}return 1}(t))e.push(E.i/i|0),e.push(t.i/i|0),e.push(T.i/i|0),L(t),t=T.next,w=T.next;else if((t=T)===w){o?1===o?O(t=function(t,e,i){var r=t;do{var n=r.prev,s=r.next.next}while(!P(n,s)&&C(n,r,r.next,s)&&M(n,s)&&M(s,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(s.i/i|0),L(r),L(r.next),r=t=s),r=r.next,r!==t);return A(r)}(A(t),e,i),e,i,r,n,s,2):2===o&&function(t,e,i,r,n,s){var o=t;do{for(var a,h=o.next.next;h!==o.prev;){if(o.i!==h.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&C(i,i.next,t,e))return 1}while(i=i.next,i!==t);return}(t,e)&&(M(t,e)&&M(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;for(;i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next,i!==t;);return r}(t,e)&&(S(t.prev,t,e.prev)||S(t,e.prev,e))||P(t,e)&&0<S(t.prev,t,t.next)&&0<S(e.prev,e,e.next))}(o,h))return a=N(o,h),o=A(o,o.next),a=A(a,a.next),O(o,e,i,r,n,s,0),O(a,e,i,r,n,s,0);h=h.next}}while(o=o.next,o!==t)}(t,e,i,r,n,s):O(A(t),e,i,r,n,s,1);break}}}function y(t,e){return t.x-e.x}function I(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function R(t,e,i,r,n,s,o,a){return(t-o)*(s-a)<=(n-o)*(e-a)&&(i-o)*(e-a)<=(t-o)*(r-a)&&(n-o)*(r-a)<=(i-o)*(s-a)}function S(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function P(t,e){return t.x===e.x&&t.y===e.y}function C(t,e,i,r){var n=u(S(t,e,i)),s=u(S(t,e,r)),o=u(S(i,r,t)),a=u(S(i,r,e));return n!==s&&o!==a||(0===n&&h(t,i,e)||(0===s&&h(t,r,e)||(0===o&&h(i,t,r)||!(0!==a||!h(i,e,r)))))}function h(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function u(t){return 0<t?1:t<0?-1:0}function M(t,e){return S(t.prev,t,t.next)<0?0<=S(t,e,t.next)&&0<=S(t,t.prev,e):S(t,e,t.prev)<0||S(t,t.next,e)<0}function N(t,e){var i=new o(t.i,t.x,t.y),r=new o(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(s.next=r).prev=s,r}function a(t,e,i,r){t=new o(t,e,i);return r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function L(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=r,(t.exports.default=r).deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(_(t,0,s,i));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*i,l=a<h-1?e[a+1]*i:t.length;o-=Math.abs(_(t,u,l,i))}for(var c=0,a=0;a<r.length;a+=3){var d=r[a]*i,p=r[a+1]*i,f=r[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[1+p]-t[1+d])-(t[d]-t[p])*(t[1+f]-t[1+d]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);0<n&&(r+=t[n-1].length,i.holes.push(r))}return i}},function(t,e,i){"use strict";t.exports=(e,i={})=>{if(e){const n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var r=n.parser[i.strictMode?"strict":"loose"].exec(e);const s={};let t=14;for(;t--;)s[n.key[t]]=r[t]||"";return s[n.q.name]={},s[n.key[12]].replace(n.q.parser,function(t,e,i){e&&(s[n.q.name][e]=i)}),s}}},function(t,m,A){!function(t,e){var i,y,_,v,n,s,r,o,a,h,u,g,x;function b(t){throw RangeError(h[t])}function l(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function c(t,e){var i=t.split("@"),r="",i=(1<i.length&&(r=i[0]+"@",t=i[1]),(t=t.replace(a,".")).split("."));return r+l(i,e).join(".")}function E(t){for(var e,i,r=[],n=0,s=t.length;n<s;)55296<=(e=t.charCodeAt(n++))&&e<=56319&&n<s?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function f(t){return l(t,function(t){var e="";return 65535<t&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,i){var r=0;for(t=i?g(t/s):t>>1,t+=g(t/e);u*v>>1<t;r+=_)t=g(t/u);return g(r+(u+1)*t/(t+n))}function d(t){var e,i,r,n,s,o,a,h=[],u=t.length,l=0,c=128,d=72,p=t.lastIndexOf("-");for(p<0&&(p=0),i=0;i<p;++i)128<=t.charCodeAt(i)&&b("not-basic"),h.push(t.charCodeAt(i));for(r=0<p?p+1:0;r<u;){for(n=l,s=1,o=_;u<=r&&b("invalid-input"),a=t.charCodeAt(r++),(_<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:_)||a>g((y-l)/s))&&b("overflow"),l+=a*s,!(a<(a=o<=d?1:d+v<=o?v:o-d));o+=_)s>g(y/(a=_-a))&&b("overflow"),s*=a;d=w(l-n,e=h.length+1,0==n),g(l/e)>y-c&&b("overflow"),c+=g(l/e),l%=e,h.splice(l++,0,c)}return f(h)}function p(t){for(var e,i,r,n,s,o,a,h,u,l,c=[],d=(t=E(t)).length,p=128,f=72,m=e=0;m<d;++m)(a=t[m])<128&&c.push(x(a));for(i=r=c.length,r&&c.push("-");i<d;){for(n=y,m=0;m<d;++m)p<=(a=t[m])&&a<n&&(n=a);for(n-p>g((y-e)/(h=i+1))&&b("overflow"),e+=(n-p)*h,p=n,m=0;m<d;++m)if((a=t[m])<p&&++e>y&&b("overflow"),a==p){for(s=e,o=_;!(s<(u=o<=f?1:f+v<=o?v:o-f));o+=_)c.push(x(T(u+(l=s-u)%(u=_-u),0))),s=g(l/u);c.push(x(T(s,0))),f=w(e,h,i==r),e=0,++i}++e,++p}return c.join("")}m&&m.nodeType,t&&t.nodeType,(e="object"==typeof e&&e).global!==e&&e.window!==e&&e.self,y=2147483647,v=26,n=38,s=700,r=/^xn--/,o=/[^\x20-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=(_=36)-1,g=Math.floor,x=String.fromCharCode,i={version:"1.3.2",ucs2:{decode:E,encode:f},decode:d,encode:p,toASCII:function(t){return c(t,function(t){return o.test(t)?"xn--"+p(t):t})},toUnicode:function(t){return c(t,function(t){return r.test(t)?d(t.slice(4).toLowerCase()):t})}},void 0!==(e=function(){return i}.call(m,A,m,t))&&(t.exports=e)}.call(this,A(6)(t),A(7))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(10),e.encode=e.stringify=i(11)},function(t,e,i){"use strict";t.exports=function(t,e,i,r){e=e||"&",i=i||"=";var n={};if("string"==typeof t&&0!==t.length){var s=/\+/g,e=(t=t.split(e),1e3),o=(r&&"number"==typeof r.maxKeys&&(e=r.maxKeys),t.length);0<e&&e<o&&(o=e);for(var a=0;a<o;++a){var h,u=t[a].replace(s,"%20"),l=u.indexOf(i),l=0<=l?(h=u.substr(0,l),u.substr(l+1)):(h=u,""),u=decodeURIComponent(h),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(n,u)?c(n[u])?n[u].push(l):n[u]=[n[u],l]:n[u]=l}}return n};var c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";function s(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports=function(i,r,n,t){return r=r||"&",n=n||"=","object"==typeof(i=null===i?void 0:i)?a(h(i),function(t){var e=encodeURIComponent(s(t))+n;return o(i[t])?a(i[t],function(t){return e+encodeURIComponent(s(t))}).join(r):e+encodeURIComponent(s(i[t]))}).join(r):t?encodeURIComponent(s(t))+n+encodeURIComponent(s(i)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var h=Object.keys||function(t){var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i}},function(U,t,F){"use strict";F.r(t);function B(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var k=/iPhone/i,X=/iPod/i,j=/iPad/i,Y=/\biOS-universal(?:.+)Mac\b/i,G=/\bAndroid(?:.+)Mobile\b/i,H=/Android/i,V=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,z=/Silk/i,W=/Windows Phone/i,q=/\bWindows(?:.+)ARM\b/i,K=/BlackBerry/i,Z=/BB10/i,J=/Opera Mini/i,Q=/\b(CriOS|Chrome)(?:.+)Mobile/i,$=/Mobile(?:.+)Firefox\b/i;function tt(t){var e,i={userAgent:"",platform:"",maxTouchPoints:0},t=(t||"undefined"==typeof navigator?"string"==typeof t?i.userAgent=t:t&&t.userAgent&&(i={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):i={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0},i.userAgent),r=t.split("[FBAN"),r=(void 0!==(r=(t=void 0!==r[1]?r[0]:t).split("Twitter"))[1]&&(t=r[0]),e=t,function(t){return t.test(e)}),t={apple:{phone:r(k)&&!r(W),ipod:r(X),tablet:!r(k)&&(r(j)||B(i))&&!r(W),universal:r(Y),device:(r(k)||r(X)||r(j)||r(Y)||B(i))&&!r(W)},amazon:{phone:r(V),tablet:!r(V)&&r(z),device:r(V)||r(z)},android:{phone:!r(W)&&r(V)||!r(W)&&r(G),tablet:!r(W)&&!r(V)&&!r(G)&&(r(z)||r(H)),device:!r(W)&&(r(V)||r(z)||r(G)||r(H))||r(/\bokhttp\b/i)},windows:{phone:r(W),tablet:r(q),device:r(W)||r(q)},other:{blackberry:r(K),blackberry10:r(Z),opera:r(J),firefox:r($),chrome:r(Q),device:r(K)||r(Z)||r(J)||r($)||r(Q)},any:!1,phone:!1,tablet:!1};return t.any=t.apple.device||t.android.device||t.windows.device||t.other.device,t.phone=t.apple.phone||t.android.phone||t.windows.phone,t.tablet=t.apple.tablet||t.android.tablet||t.windows.tablet,t}t=tt(window.navigator);var et,it,rt={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(Ct=32,n=!0,(t.tablet||t.phone)&&(t.apple.device&&(it=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(it[1],10)<11&&(n=!1),t.android.device&&(it=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(it[1],10)<7&&(n=!1)),n?Ct:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:t.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!t.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},nt=2*Math.PI,st=180/Math.PI,ot=Math.PI/180,at=((it=et=et||{})[it.POLY=0]="POLY",it[it.RECT=1]="RECT",it[it.CIRC=2]="CIRC",it[it.ELIP=3]="ELIP",it[it.RREC=4]="RREC",Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},e.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},e.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(t-r,0),this},e.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},e.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=t-r,this},e);function e(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=et.RECT}ut.prototype.clone=function(){return new ut(this.x,this.y)},ut.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},ut.prototype.copyTo=function(t){return t.set(this.x,this.y),t},ut.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},ut.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this};var ht=ut;function ut(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}ct.prototype.clone=function(t,e){return new ct(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},ct.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},ct.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},ct.prototype.copyTo=function(t){return t.set(this._x,this._y),t},ct.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(ct.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(ct.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0});var lt=ct;function ct(t,e,i,r){void 0===r&&(r=0),this._x=i=void 0===i?0:i,this._y=r,this.cb=t,this.scope=e}i.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i.prototype.set=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},i.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},i.prototype.apply=function(t,e){e=e||new ht;var i=t.x,t=t.y;return e.x=this.a*i+this.c*t+this.tx,e.y=this.b*i+this.d*t+this.ty,e},i.prototype.applyInverse=function(t,e){e=e||new ht;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,t=t.y;return e.x=this.d*i*r+-this.c*i*t+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*t+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},i.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i.prototype.rotate=function(t){var e=Math.cos(t),t=Math.sin(t),i=this.a,r=this.c,n=this.tx;return this.a=i*e-this.b*t,this.b=i*t+this.b*e,this.c=r*e-this.d*t,this.d=r*t+this.d*e,this.tx=n*e-this.ty*t,this.ty=n*t+this.ty*e,this},i.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},i.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},i.prototype.prepend=function(t){var e,i,r=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,i=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d),this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},i.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=-Math.atan2(-r,n),o=Math.atan2(i,e),a=Math.abs(s+o);return a<1e-5||Math.abs(nt-a)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},i.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var t=new i;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0});var dt=i;function i(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s}var pt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ft=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],mt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],yt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],_t=[],vt=[],gt=Math.sign;for(var r=0;r<16;r++){var xt=[];_t.push(xt);for(var bt=0;bt<16;bt++)for(var Et=gt(pt[r]*pt[bt]+mt[r]*ft[bt]),Tt=gt(ft[r]*pt[bt]+yt[r]*ft[bt]),wt=gt(pt[r]*mt[bt]+mt[r]*yt[bt]),At=gt(ft[r]*mt[bt]+yt[r]*yt[bt]),Ot=0;Ot<16;Ot++)if(pt[Ot]===Et&&ft[Ot]===Tt&&mt[Ot]===wt&&yt[Ot]===At){xt.push(Ot);break}}for(r=0;r<16;r++){var It=new dt;It.set(pt[r],ft[r],mt[r],yt[r],0,0),vt.push(It)}St.prototype.onChange=function(){this._localID++},St.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},St.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},St.prototype.updateTransform=function(t){var e,i,r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(i=this.worldTransform).a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},St.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(St.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),St.IDENTITY=new St;var Rt=St;function St(){this.worldTransform=new dt,this.localTransform=new dt,this.position=new lt(this.onChange,this,0,0),this.scale=new lt(this.onChange,this,1,1),this.pivot=new lt(this.onChange,this,0,0),this.skew=new lt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var Pt,n=F(2),Ct=F.n(n),Mt=(F(3),F(0));(t=Pt=Pt||{})[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",(n={NPM:0,0:"NPM",UNPACK:1,1:"UNPACK",PMA:2,2:"PMA",NO_PREMULTIPLIED_ALPHA:0})[0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(t={NO:0,0:"NO",YES:1,1:"YES",AUTO:2,2:"AUTO",BLEND:0})[0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",rt.RETINA_PREFIX=/@([0-9\.]+)x/,rt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;!function(){for(var t=[],e=[],i=0;i<32;i++)e[t[i]=i]=i;t[Pt.NORMAL_NPM]=Pt.NORMAL,t[Pt.ADD_NPM]=Pt.ADD,t[Pt.SCREEN_NPM]=Pt.SCREEN,e[Pt.NORMAL]=Pt.NORMAL_NPM,e[Pt.ADD]=Pt.ADD_NPM,e[Pt.SCREEN]=Pt.SCREEN_NPM;var r=[];r.push(e),r.push(t)}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Nt(t,e,i){var r=t.length;if(!(r<=e||0===i)){for(var n=r-(i=r<e+i?r-e:i),s=e;s<n;++s)t[s]=t[s+i];t.length=n}}Object.create(null),Object.create(null);Lt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Lt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},Lt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(Lt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Lt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function Lt(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||rt.RESOLUTION,this.resize(t,e)}rt.SORTABLE_CHILDREN=!1;s.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},s.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},s.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?at.EMPTY:((t=t||new at(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},s.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},s.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,i=o<i?o:i,r=r<s?s:r,n=n<o?o:n;e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,r=r<s?s:r,n=n<o?o:n,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,r=r<s?s:r,n=n<o?o:n,s=t[6],i=(o=t[7])<i?o:i,r=r<s?s:r,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=i,this.maxX=r,this.maxY=n},s.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},s.prototype.addFrameMatrix=function(t,e,i,r,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,t=t.ty,l=s*e+a*i+u,c=o*e+h*i+t,d=l<(d=this.minX)?l:d,p=c<(p=this.minY)?c:p,f=(f=this.maxX)<l?l:f,m=(m=this.maxY)<c?c:m;d=(l=s*r+a*i+u)<d?l:d,p=(c=o*r+h*i+t)<p?c:p,f=f<l?l:f,m=m<c?c:m,d=(l=s*e+a*n+u)<d?l:d,p=(c=o*e+h*n+t)<p?c:p,m=m<c?c:m,p=(c=o*r+h*n+t)<p?c:p,f=(f=f<l?l:f)<(l=s*r+a*n+u)?l:f,m=m<c?c:m,this.minX=d=l<d?l:d,this.minY=p,this.maxX=f,this.maxY=m},s.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2)var h=t[a],u=t[a+1],r=h<r?h:r,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=r,this.minY=n,this.maxX=s,this.maxY=o},s.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},s.prototype.addVerticesMatrix=function(t,e,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,y=i;y<r;y+=2)var _=e[y],v=e[y+1],g=o*_+h*v+l,v=u*v+a*_+c,d=Math.min(d,g-n),f=Math.max(f,g+n),p=Math.min(p,v-s),m=Math.max(m,v+s);this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},s.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},s.prototype.addBoundsMask=function(t,e){var i,r,n,s=(t.minX>e.minX?t:e).minX,o=(t.minY>e.minY?t:e).minY,a=(t.maxX<e.maxX?t:e).maxX,t=(t.maxY<e.maxY?t:e).maxY;s<=a&&o<=t&&(e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,this.minX=s<e?s:e,this.minY=o<i?o:i,this.maxX=r<a?a:r,this.maxY=n<t?t:n)},s.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},s.prototype.addBoundsArea=function(t,e){var i,r,n,s=t.minX>e.x?t.minX:e.x,o=t.minY>e.y?t.minY:e.y,a=t.maxX<e.x+e.width?t.maxX:e.x+e.width,t=t.maxY<e.y+e.height?t.maxY:e.y+e.height;s<=a&&o<=t&&(e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,this.minX=s<e?s:e,this.minY=o<i?o:i,this.maxX=r<a?a:r,this.maxY=n<t?t:n)},s.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},s.prototype.addFramePad=function(t,e,i,r,n,s){e-=s,i+=n,r+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r};var Dt=s;function s(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var Ut=function(t,e){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Ft(t,e){function i(){this.constructor=t}Ut(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}Ft(o,Bt=Ct.a),o.mixin=function(t){for(var e=Object.keys(t),i=0;i<e.length;++i){var r=e[i];Object.defineProperty(o.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},o.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},o.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},o.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new at),e=this._boundsRect),this._bounds.getRectangle(e)},o.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new at),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Dt);var e=this.transform,i=this.parent,r=(this.parent=null,this.transform=this._tempDisplayObjectParent.transform,this._bounds),n=this._boundsID,t=(this._bounds=this._localBounds,this.getBounds(!1,t));return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-n,t},o.prototype.toGlobal=function(t,e,i){return(i=void 0===i?!1:i)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},o.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},o.prototype.setParent=function(t){if(t&&t.addChild)return t.addChild(this),t;throw new Error("setParent: Argument must be a Container")},o.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},o.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(o.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Xt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),o.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},o.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(o.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"angle",{get:function(){return this.transform.rotation*st},set:function(t){this.transform.rotation=t*ot},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0});var Bt,n=o;function o(){var t=Bt.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Rt,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Dt,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}Ft(jt,kt=n);var kt,Xt=jt;function jt(){var t=null!==kt&&kt.apply(this,arguments)||this;return t.sortDirty=null,t}function Yt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}n.prototype.displayObjectUpdateTransform=n.prototype.updateTransform;Ft(a,Gt=n),a.prototype.onChildrenChange=function(t){},a.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(1<e.length)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},a.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},a.prototype.swapChildren=function(t,e){var i,r;t!==e&&(i=this.getChildIndex(t),r=this.getChildIndex(e),this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r))},a.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},a.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Nt(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},a.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},a.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(1<e.length)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Nt(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},a.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Nt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},a.prototype.removeChildren=function(t,e){var i=t=void 0===t?0:t,r=(e=void 0===e?this.children.length:e)-i;if(0<r&&r<=e){for(var n=this.children.splice(i,r),s=0;s<n.length;++s)n[s].parent=null,n[s].transform&&(n[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(s=0;s<n.length;++s)n[s].emit("removed",this),this.emit("childRemoved",n[s],this,s);return n}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},a.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(Yt),this.sortDirty=!1},a.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},a.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,i=this.children[t];i.visible&&i.renderable&&(i.calculateBounds(),i._mask?((e=i._mask.maskObject||i._mask).calculateBounds(),this._bounds.addBoundsMask(i._bounds,e._bounds)):i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds))}this._bounds.updateID=this._boundsID},a.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=Gt.prototype.getLocalBounds.call(this,t);if(!e)for(var i=0,r=this.children.length;i<r;++i){var n=this.children[i];n.visible&&n.updateTransform()}return t},a.prototype._calculateBounds=function(){},a.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},a.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var r=this._enabledFilters.length=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var r=0,n=this.children.length;r<n;r++)this.children[r].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},a.prototype._render=function(t){},a.prototype.destroy=function(t){Gt.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(e)for(var r=0;r<i.length;++r)i[r].destroy(t)},Object.defineProperty(a.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0});var Gt,Ht=a;function a(){var t=Gt.call(this)||this;return t.children=[],t.sortableChildren=rt.SORTABLE_CHILDREN,t.sortDirty=!1,t}Ht.prototype.containerUpdateTransform=Ht.prototype.updateTransform;t=tt(window.navigator);var Vt,zt,Wt,qt,h,Kt,Zt,Jt,Qt,$t,te,ee,ie,re,ne,se,oe,ae,he,m={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(n=32,l=!0,(t.tablet||t.phone)&&(t.apple.device&&(zt=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(zt[1],10)<11&&(l=!1),t.android.device&&(zt=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(zt[1],10)<7&&(l=!1)),l?n:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:t.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!t.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},ue=((zt=Vt=Vt||{})[zt.WEBGL_LEGACY=0]="WEBGL_LEGACY",zt[zt.WEBGL=1]="WEBGL",zt[zt.WEBGL2=2]="WEBGL2",(l=Wt=Wt||{})[l.UNKNOWN=0]="UNKNOWN",l[l.WEBGL=1]="WEBGL",l[l.CANVAS=2]="CANVAS",(n=qt=qt||{})[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",(l=h=h||{})[l.NORMAL=0]="NORMAL",l[l.ADD=1]="ADD",l[l.MULTIPLY=2]="MULTIPLY",l[l.SCREEN=3]="SCREEN",l[l.OVERLAY=4]="OVERLAY",l[l.DARKEN=5]="DARKEN",l[l.LIGHTEN=6]="LIGHTEN",l[l.COLOR_DODGE=7]="COLOR_DODGE",l[l.COLOR_BURN=8]="COLOR_BURN",l[l.HARD_LIGHT=9]="HARD_LIGHT",l[l.SOFT_LIGHT=10]="SOFT_LIGHT",l[l.DIFFERENCE=11]="DIFFERENCE",l[l.EXCLUSION=12]="EXCLUSION",l[l.HUE=13]="HUE",l[l.SATURATION=14]="SATURATION",l[l.COLOR=15]="COLOR",l[l.LUMINOSITY=16]="LUMINOSITY",l[l.NORMAL_NPM=17]="NORMAL_NPM",l[l.ADD_NPM=18]="ADD_NPM",l[l.SCREEN_NPM=19]="SCREEN_NPM",l[l.NONE=20]="NONE",l[l.SRC_OVER=0]="SRC_OVER",l[l.SRC_IN=21]="SRC_IN",l[l.SRC_OUT=22]="SRC_OUT",l[l.SRC_ATOP=23]="SRC_ATOP",l[l.DST_OVER=24]="DST_OVER",l[l.DST_IN=25]="DST_IN",l[l.DST_OUT=26]="DST_OUT",l[l.DST_ATOP=27]="DST_ATOP",l[l.ERASE=26]="ERASE",l[l.SUBTRACT=28]="SUBTRACT",l[l.XOR=29]="XOR",(n=Kt=Kt||{})[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",(l=Zt=Zt||{})[l.RGBA=6408]="RGBA",l[l.RGB=6407]="RGB",l[l.ALPHA=6406]="ALPHA",l[l.LUMINANCE=6409]="LUMINANCE",l[l.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",l[l.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",l[l.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(n=Jt=Jt||{})[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(l=Qt=Qt||{})[l.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",l[l.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",l[l.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",l[l.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",l[l.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",l[l.FLOAT=5126]="FLOAT",l[l.HALF_FLOAT=36193]="HALF_FLOAT",(n=$t=$t||{})[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",(l=te=te||{})[l.CLAMP=33071]="CLAMP",l[l.REPEAT=10497]="REPEAT",l[l.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(n=ee=ee||{})[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",(l=ie=ie||{})[l.NPM=0]="NPM",l[l.UNPACK=1]="UNPACK",l[l.PMA=2]="PMA",l[l.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",l[l.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",l[l.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(n=re=re||{})[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",(l=ne=ne||{})[l.AUTO=0]="AUTO",l[l.MANUAL=1]="MANUAL",(n=se=se||{}).LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",(l=oe=oe||{})[l.NONE=0]="NONE",l[l.SCISSOR=1]="SCISSOR",l[l.STENCIL=2]="STENCIL",l[l.SPRITE=3]="SPRITE",(n=ae=ae||{})[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",m.RETINA_PREFIX=/@([0-9\.]+)x/,!(m.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0)),le="5.3.12";var ce=function(){for(var t=[],e=[],i=0;i<32;i++)e[t[i]=i]=i;t[h.NORMAL_NPM]=h.NORMAL,t[h.ADD_NPM]=h.ADD,t[h.SCREEN_NPM]=h.SCREEN,e[h.NORMAL]=h.NORMAL_NPM,e[h.ADD]=h.ADD_NPM,e[h.SCREEN]=h.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();Float32Array,Uint32Array,Int32Array,Uint8Array;function de(t){return t+=0===t?1:0,--t,(t=(t=(t=(t=(t|=t>>>1)|t>>>2)|t>>>4)|t>>>8)|t>>>16)+1}function pe(t){return!(t&t-1||!t)}function fe(t){var e=(65535<t?1:0)<<4,i=(255<(t>>>=e)?1:0)<<3;return(e|=i)|(i=(15<(t>>>=i)?1:0)<<2)|(i=(3<(t>>>=i)?1:0)<<1)|(t>>>=i)>>1}var me=0;var ye={};function _e(t,e,i){var r;void 0===i&&(i=3),ye[e]||(void 0===(r=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),ye[e]=!0)}var ve={},ge=Object.create(null),xe=Object.create(null);be.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},be.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},be.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(be.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function be(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||m.RESOLUTION,this.resize(t,e)}var Ee;function Te(t,e){t=m.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1}we.prototype.emit=function(t,e,i,r,n,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,i,r,n,s,o,a);return u===this.items&&this._aliasCount--,this},we.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},we.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},we.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},we.prototype.contains=function(t){return-1!==this.items.indexOf(t)},we.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},we.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(we.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(we.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0});var u=we;function we(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(u.prototype,{dispatch:{value:u.prototype.emit},run:{value:u.prototype.emit}});var l=tt(window.navigator);var Ae,Oe,Ie={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(n=32,Ce=!0,(l.tablet||l.phone)&&(l.apple.device&&(Oe=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(Oe[1],10)<11&&(Ce=!1),l.android.device&&(Oe=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(Oe[1],10)<7&&(Ce=!1)),Ce?n:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:l.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!l.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1,TARGET_FPMS:.06},Re=((Oe=Ae=Ae||{})[Oe.INTERACTION=50]="INTERACTION",Oe[Oe.HIGH=25]="HIGH",Oe[Oe.NORMAL=0]="NORMAL",Oe[Oe.LOW=-25]="LOW",Oe[Oe.UTILITY=-50]="UTILITY",Se.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Se.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},Se.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Se.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Se);function Se(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.fn=t,this.context=e,this.priority=i,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}c.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},c.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},c.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},c.prototype.add=function(t,e,i){return void 0===i&&(i=Ae.NORMAL),this._addListener(new Re(t,e,i))},c.prototype.addOnce=function(t,e,i){return void 0===i&&(i=Ae.NORMAL),this._addListener(new Re(t,e,i,!0))},c.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}e=(i=e).next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},c.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(c.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),c.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},c.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},c.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},c.prototype.update=function(t){var e;if((t=void 0===t?performance.now():t)>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ie.TARGET_FPMS;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(c.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,Ie.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(c,"shared",{get:function(){var t;return c._shared||((t=c._shared=new c).autoStart=!0,t._protected=!0),c._shared},enumerable:!1,configurable:!0}),Object.defineProperty(c,"system",{get:function(){var t;return c._system||((t=c._system=new c).autoStart=!0,t._protected=!0),c._system},enumerable:!1,configurable:!0});var Pe=c;function c(){var e=this;this._head=new Re(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/Ie.TARGET_FPMS,this.elapsedMS=1/Ie.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Me.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,Ae.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Pe.shared:new Pe,t.autoStart&&this.start()},Me.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())};var Ce=Me;function Me(){}var Ne,Le=2*Math.PI,De=(Math.PI,Math.PI,(n=Ne=Ne||{})[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",Object.defineProperty(d.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(d,"EMPTY",{get:function(){return new d(0,0,0,0)},enumerable:!1,configurable:!0}),d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},d.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},d.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},d.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},d.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(t-r,0),this},d.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},d.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=t-r,this},d);function d(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=Ne.RECT}Fe.prototype.clone=function(){return new Fe(this.x,this.y)},Fe.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Fe.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Fe.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Fe.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this};var Ue=Fe;function Fe(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}ke.prototype.clone=function(t,e){return new ke(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},ke.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},ke.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},ke.prototype.copyTo=function(t){return t.set(this._x,this._y),t},ke.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(ke.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(ke.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0});var Be=ke;function ke(t,e,i,r){void 0===r&&(r=0),this._x=i=void 0===i?0:i,this._y=r,this.cb=t,this.scope=e}p.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},p.prototype.set=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},p.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},p.prototype.apply=function(t,e){e=e||new Ue;var i=t.x,t=t.y;return e.x=this.a*i+this.c*t+this.tx,e.y=this.b*i+this.d*t+this.ty,e},p.prototype.applyInverse=function(t,e){e=e||new Ue;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,t=t.y;return e.x=this.d*i*r+-this.c*i*t+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*t+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},p.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},p.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},p.prototype.rotate=function(t){var e=Math.cos(t),t=Math.sin(t),i=this.a,r=this.c,n=this.tx;return this.a=i*e-this.b*t,this.b=i*t+this.b*e,this.c=r*e-this.d*t,this.d=r*t+this.d*e,this.tx=n*e-this.ty*t,this.ty=n*t+this.ty*e,this},p.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},p.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},p.prototype.prepend=function(t){var e,i,r=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,i=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d),this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},p.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=-Math.atan2(-r,n),o=Math.atan2(i,e),a=Math.abs(s+o);return a<1e-5||Math.abs(Le-a)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},p.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},p.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},p.prototype.clone=function(){var t=new p;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},p.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},p.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(p,"IDENTITY",{get:function(){return new p},enumerable:!1,configurable:!0}),Object.defineProperty(p,"TEMP_MATRIX",{get:function(){return new p},enumerable:!1,configurable:!0});var Xe=p;function p(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s}var je=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ye=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ge=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],He=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ve=[],ze=[],We=Math.sign;for(var f=0;f<16;f++){var qe=[];Ve.push(qe);for(var Ke=0;Ke<16;Ke++)for(var Ze=We(je[f]*je[Ke]+Ge[f]*Ye[Ke]),Je=We(Ye[f]*je[Ke]+He[f]*Ye[Ke]),Qe=We(je[f]*Ge[Ke]+Ge[f]*He[Ke]),$e=We(Ye[f]*Ge[Ke]+He[f]*He[Ke]),ti=0;ti<16;ti++)if(je[ti]===Ze&&Ye[ti]===Je&&Ge[ti]===Qe&&He[ti]===$e){qe.push(ti);break}}for(f=0;f<16;f++){var ei=new Xe;ei.set(je[f],Ye[f],Ge[f],He[f],0,0),ze.push(ei)}var y={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return je[t]},uY:function(t){return Ye[t]},vX:function(t){return Ge[t]},vY:function(t){return He[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Ve[t][e]},sub:function(t,e){return Ve[t][y.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?y.S:y.N:2*Math.abs(e)<=Math.abs(t)?0<t?y.E:y.W:0<e?0<t?y.SE:y.SW:0<t?y.NE:y.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);e=ze[y.inv(e)];e.tx=i,e.ty=r,t.append(e)}};ii.prototype.onChange=function(){this._localID++},ii.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},ii.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},ii.prototype.updateTransform=function(t){var e,i,r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(i=this.worldTransform).a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},ii.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(ii.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),ii.IDENTITY=new ii;function ii(){this.worldTransform=new Xe,this.localTransform=new Xe,this.position=new Be(this.onChange,this,0,0),this.scale=new Be(this.onChange,this,1,1),this.pivot=new Be(this.onChange,this,0,0),this.skew=new Be(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}m.PREFER_ENV=t.any?Vt.WEBGL:Vt.WEBGL2,m.STRICT_TEXTURE_CACHE=!1;var ri=[];function ni(t,e){if(!t)return null;var i,r="";"string"==typeof t&&(i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(r=i[1].toLowerCase());for(var n=ri.length-1;0<=n;--n){var s=ri[n];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var si=function(t,e){return(si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function _(t,e){function i(){this.constructor=t}si(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}ai.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},ai.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},ai.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(ai.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),ai.prototype.update=function(){this.destroyed||this.onUpdate.emit()},ai.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(ai.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(ai.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),ai.prototype.style=function(t,e,i){return!1},ai.prototype.dispose=function(){},ai.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},ai.test=function(t,e){return!1};var oi=ai;function ai(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new u("setRealSize"),this.onUpdate=new u("update"),this.onError=new u("onError")}_(li,hi=oi),li.prototype.upload=function(t,e,i){t=t.gl;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ie.UNPACK),i.width===e.width&&i.height===e.height?t.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,t.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},li.prototype.dispose=function(){this.data=null},li.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array};var hi,ui=li;function li(t,e){var i=this,e=e||{},r=e.width,e=e.height;if(r&&e)return(i=hi.call(this,r,e)||this).data=t,i;throw new Error("BufferResource width or height invalid")}var ci,di={scaleMode:$t.NEAREST,format:Zt.RGBA,alphaMode:ie.NPM},v=(_(g,ci=Ct.a),Object.defineProperty(g.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),g.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},g.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},g.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},g.prototype._refreshPOT=function(){this.isPowerOfTwo=pe(this.realWidth)&&pe(this.realHeight)},g.prototype.setResolution=function(t){var e=this.resolution;return e!==t&&(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},g.prototype.setResource=function(t){if(this.resource!==t){if(this.resource)throw new Error("Resource can be set only once");t.bind(this),this.resource=t}return this},g.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},g.prototype.onError=function(t){this.emit("error",this,t)},g.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xe[this.cacheId],delete ge[this.cacheId],this.cacheId=null),this.dispose(),g.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},g.prototype.dispose=function(){this.emit("dispose",this)},g.prototype.castToBaseTexture=function(){return this},g.from=function(t,e,i){void 0===i&&(i=m.STRICT_TEXTURE_CACHE);var r="string"==typeof t,n=null,n=r?t:(t._pixiId||(t._pixiId="pixiid_"+ ++me),t._pixiId),s=xe[n];if(r&&i&&!s)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return s||((s=new g(t,e)).cacheId=n,g.addToCache(s,n)),s},g.fromBuffer=function(t,e,i,r){t=t||new Float32Array(e*i*4);var n=new ui(t,{width:e,height:i}),t=t instanceof Float32Array?Qt.FLOAT:Qt.UNSIGNED_BYTE;return new g(n,Object.assign(di,r||{width:e,height:i,type:t}))},g.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),xe[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),xe[e]=t)},g.removeFromCache=function(t){if("string"==typeof t){var e,i=xe[t];if(i)return-1<(e=i.textureCacheIds.indexOf(t))&&i.textureCacheIds.splice(e,1),delete xe[t],i}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete xe[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},g._globalBatch=0,g);function g(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=ci.call(this)||this,r=(e=e||{}).alphaMode,n=e.mipmap,s=e.anisotropicLevel,o=e.scaleMode,a=e.width,h=e.height,u=e.wrapMode,l=e.format,c=e.type,d=e.target,p=e.resolution,f=e.resourceOptions;return!t||t instanceof oi||((t=ni(t,f)).internal=!0),i.width=a||0,i.height=h||0,i.resolution=p||m.RESOLUTION,i.mipmap=void 0!==n?n:m.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==s?s:m.ANISOTROPIC_LEVEL,i.wrapMode=u||m.WRAP_MODE,i.scaleMode=void 0!==o?o:m.SCALE_MODE,i.format=l||Zt.RGBA,i.type=c||Qt.UNSIGNED_BYTE,i.target=d||Jt.TEXTURE_2D,i.alphaMode=void 0!==r?r:ie.UNPACK,void 0!==e.premultiplyAlpha&&(i.premultiplyAlpha=e.premultiplyAlpha),i.uid=++me,i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=0<a&&0<h,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}_(fi,pi=oi),fi.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof oi?this.addResourceAt(t[i],i):this.addResourceAt(ni(t[i],e),i))},fi.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},fi.prototype.addResourceAt=function(t,e){if(this.items[e])return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this;throw new Error("Index "+e+" is out of bounds")},fi.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");pi.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},fi.prototype.unbind=function(t){pi.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},fi.prototype.load=function(){var t,i=this;return this._load||(t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()}),this._load=Promise.all(t).then(function(){var t=i.items[0],e=t.realWidth,t=t.realHeight;return i.resize(e,t),Promise.resolve(i)})),this._load};var pi,l=fi;function fi(t,e){var i=this,e=e||{},r=e.width,e=e.height;(i=pi.call(this,r,e)||this).items=[],i.itemDirtyIds=[];for(var n=0;n<t;n++){var s=new v;i.items.push(s),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}_(yi,mi=l),yi.prototype.addBaseTextureAt=function(t,e){if(t.resource)return this.addResourceAt(t.resource,e),this;throw new Error("ArrayResource does not support RenderTexture")},yi.prototype.bind=function(t){mi.prototype.bind.call(this,t),t.target=Jt.TEXTURE_2D_ARRAY},yi.prototype.upload=function(t,e,i){var r=this.length,n=this.itemDirtyIds,s=this.items,o=t.gl;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,r,0,e.format,e.type,null);for(var a=0;a<r;a++){var h=s[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0};var mi,n=yi;function yi(t,e){var i,r=this,n=e||{},s=n.width,n=n.height,t=Array.isArray(t)?(i=t).length:t,r=mi.call(this,t,{width:s,height:n})||this;return i&&r.initFromArray(i,e),r}_(gi,_i=oi),gi.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,(Ee=Ee||document.createElement("a")).href=t;var i=!(t=Object(Mt.parse)(Ee.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},gi.prototype.upload=function(t,e,i,r){var t=t.gl,n=e.realWidth,s=e.realHeight;return r=r||this.source,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ie.UNPACK),this.noSubImage||e.target!==t.TEXTURE_2D||i.width!==n||i.height!==s?(i.width=n,i.height=s,t.texImage2D(e.target,0,e.format,e.format,e.type,r)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,r),!0},gi.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),_i.prototype.update.call(this))},gi.prototype.dispose=function(){this.source=null};var _i,vi=gi;function gi(t){var e=this,i=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;return(e=_i.call(this,i,r)||this).source=t,e.noSubImage=!1,e}_(bi,xi=vi),bi.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement};var xi,t=bi;function bi(){return null!==xi&&xi.apply(this,arguments)||this}_(Ti,Ei=l),Ti.prototype.bind=function(t){Ei.prototype.bind.call(this,t),t.target=Jt.TEXTURE_CUBE_MAP},Ti.prototype.addBaseTextureAt=function(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=Jt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},Ti.prototype.upload=function(t,e,i){for(var r=this.itemDirtyIds,n=0;n<Ti.SIDES;n++){var s=this.items[n];r[n]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,i),r[n]=s.dirtyId):r[n]<-1&&(t.gl.texImage2D(s.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),r[n]=-1))}return!0},Ti.test=function(t){return Array.isArray(t)&&t.length===Ti.SIDES},Ti.SIDES=6;var Ei,l=Ti;function Ti(t,e){var i=this,r=e||{},n=r.width,s=r.height,o=r.autoLoad,r=r.linkBaseTexture;if(t&&t.length!==Ti.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var i=Ei.call(this,6,{width:n,height:s})||this,a=0;a<Ti.SIDES;a++)i.items[a].target=Jt.TEXTURE_CUBE_MAP_POSITIVE_X+a;return i.linkBaseTexture=!1!==r,t&&i.initFromArray(t,e),!1!==o&&i.load(),i}_(Oi,wi=vi),Oi.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){function i(){n.destroyed||(r.onload=null,r.onerror=null,n.resize(r.width,r.height),n._load=null,n.createBitmap?t(n.process()):t(n))}var r=n.source;n.url=r.src;r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){e(t),n.onError.emit(t)})})),this._load},Oi.prototype.process=function(){var e=this,t=this.source;if(null===this._process){if(null!==this.bitmap||!window.createImageBitmap)return Promise.resolve(this);this._process=window.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===ie.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})}return this._process},Oi.prototype.upload=function(t,e,i){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return wi.prototype.upload.call(this,t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(wi.prototype.upload.call(this,t,e,i,this.bitmap),!this.preserveBitmap){var r,n=!0,s=e._glTextures;for(r in s){var o=s[r];if(o!==i&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},Oi.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,wi.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},Oi.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement};var wi,Ai=Oi;function Oi(t,e){var i,r=this;return e=e||{},t instanceof HTMLImageElement||(i=new Image,vi.crossOrigin(i,t,e.crossorigin),i.src=t,t=i),r=wi.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==e.createBitmap?e.createBitmap:m.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,r.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,void 0!==e.premultiplyAlpha&&(r.premultiplyAlpha=e.premultiplyAlpha),r.bitmap=null,r._load=null,!1!==e.autoLoad&&r.load(),r}_(Ri,Ii=vi),Ri.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()})),this._load},Ri.prototype._loadSvg=function(){var s=this,o=new Image;vi.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){s._resolve&&(o.onerror=null,s.onError.emit(t))},o.onload=function(){if(s._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=t*s.scale,r=e*s.scale,n=((s._overrideWidth||s._overrideHeight)&&(i=s._overrideWidth||s._overrideHeight/e*t,r=s._overrideHeight||s._overrideWidth/t*e),i=Math.round(i),r=Math.round(r),s.source);n.width=i,n.height=r,n._pixiId="canvas_"+ ++me,n.getContext("2d").drawImage(o,0,0,t,e,0,0,i,r),s._resolve(),s._resolve=null}}},Ri.getSize=function(t){var t=Ri.SVG_SIZE.exec(t),e={};return t&&(e[t[1]]=Math.round(parseFloat(t[3])),e[t[5]]=Math.round(parseFloat(t[7]))),e},Ri.prototype.dispose=function(){Ii.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},Ri.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},Ri.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Ii,x=Ri;function Ri(t,e){var i=this;return e=e||{},(i=Ii.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=t,i.scale=e.scale||1,i._overrideWidth=e.width,i._overrideHeight=e.height,i._resolve=null,i._crossorigin=e.crossorigin,i._load=null,!1!==e.autoLoad&&i.load(),i}_(b,Si=vi),b.prototype.update=function(t){void 0===t&&(t=0),this.destroyed||(t=Pe.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(Si.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},b.prototype.load=function(){var e,i=this;return this._load||(((e=this.source).readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){i.valid?t(i):(i._resolve=t,e.load())})),this._load},b.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},b.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},b.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},b.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Pe.shared.add(this.update,this),this._isConnectedToTicker=!0)},b.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Pe.shared.remove(this.update,this),this._isConnectedToTicker=!1)},b.prototype._onCanPlay=function(){var t=this.source,e=(t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),this.valid);this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},b.prototype.dispose=function(){this._isConnectedToTicker&&Pe.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),Si.prototype.dispose.call(this)},Object.defineProperty(b.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Pe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Pe.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),b.test=function(t,e){return t instanceof HTMLVideoElement||-1<b.TYPES.indexOf(e)},b.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],b.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Si,Pi=b;function b(t,e){var i=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var r=document.createElement("video"),n=(r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),(t="string"==typeof t?[t]:t)[0].src||t[0]);vi.crossOrigin(r,n,e.crossorigin);for(var s=0;s<t.length;++s){var o=document.createElement("source"),a=t[s],h=a.src,a=a.mime,u=(h=h||t[s]).split("?").shift().toLowerCase(),u=u.substr(u.lastIndexOf(".")+1),a=a||b.MIME_TYPES[u]||"video/"+u;o.src=h,o.type=a,r.appendChild(o)}t=r}return(i=Si.call(this,t)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=e.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==e.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==e.autoLoad&&i.load(),i}_(Mi,Ci=vi),Mi.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap};var Ci,E=Mi;function Mi(){return null!==Ci&&Ci.apply(this,arguments)||this}ri.push(Ai,E,t,Pi,x,ui,l,n);Ni.prototype.destroy=function(){this.renderer=null};E=Ni;function Ni(t){this.renderer=t}_(Ui,Li=ui),Ui.prototype.upload=function(t,e,i){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ie.UNPACK),i.width===e.width&&i.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,r.texImage2D(e.target,0,1===t.context.webGLVersion?r.DEPTH_COMPONENT:r.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0};var Li,Di=Ui;function Ui(){return null!==Li&&Li.apply(this,arguments)||this}Object.defineProperty(Bi.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Bi.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new v(null,{scaleMode:$t.NEAREST,resolution:1,mipmap:ee.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Bi.prototype.addDepthTexture=function(t){return this.depthTexture=t||new v(new Di(null,{width:this.width,height:this.height}),{scaleMode:$t.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ee.OFF,format:Zt.DEPTH_COMPONENT,type:Qt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Bi.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Bi.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Bi.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},Bi.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Bi.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)};var Fi=Bi;function Bi(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new u("disposeFramebuffer"),this.multisample=ae.NONE}_(ji,ki=v),ji.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},ji.prototype.dispose=function(){this.framebuffer.dispose(),ki.prototype.dispose.call(this)},ji.prototype.destroy=function(){ki.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null};var ki,Xi=ji;function ji(t){var e=this,t=(e=ki.call(this,null,t="number"==typeof t?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t)||this,t||{}),i=t.width,t=t.height;return e.mipmap=0,e.width=Math.ceil(i)||100,e.height=Math.ceil(t)||100,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new Fi(e.width*e.resolution,e.height*e.resolution).addColorTexture(0,e),e.maskStack=[],e.filterStack=[{}],e}Gi.prototype.set=function(t,e,i){var r,n,s,o,a=e.width,e=e.height;i?(r=t.width/2/a,n=t.height/2/e,s=t.x/a+r,o=t.y/e+n,i=y.add(i,y.NW),this.x0=s+r*y.uX(i),this.y0=o+n*y.uY(i),i=y.add(i,2),this.x1=s+r*y.uX(i),this.y1=o+n*y.uY(i),i=y.add(i,2),this.x2=s+r*y.uX(i),this.y2=o+n*y.uY(i),i=y.add(i,2),this.x3=s+r*y.uX(i),this.y3=o+n*y.uY(i)):(this.x0=t.x/a,this.y0=t.y/e,this.x1=(t.x+t.width)/a,this.y1=t.y/e,this.x2=(t.x+t.width)/a,this.y2=(t.y+t.height)/e,this.x3=t.x/a,this.y3=(t.y+t.height)/e),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var Yi=Gi;function Gi(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Hi,Vi=new Yi,zi=(_(T,Hi=Ct.a),T.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},T.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},T.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture)&&t.url&&ge[t.url]&&T.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,T.removeFromCache(this),this.textureCacheIds=null},T.prototype.clone=function(){return new T(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},T.prototype.updateUvs=function(){this._uvs===Vi&&(this._uvs=new Yi),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},T.from=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=m.STRICT_TEXTURE_CACHE);var r="string"==typeof t,n=null,n=r?t:(t._pixiId||(t._pixiId="pixiid_"+ ++me),t._pixiId),s=ge[n];if(r&&i&&!s)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=Te(t)),(s=new T(new v(t,e))).baseTexture.cacheId=n,v.addToCache(s.baseTexture,n),T.addToCache(s,n)),s},T.fromURL=function(t,e){var i=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),r=T.from(t,Object.assign({resourceOptions:i},e),!1),t=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):t.load().then(function(){return Promise.resolve(r)})},T.fromBuffer=function(t,e,i,r){return new T(v.fromBuffer(t,e,i,r))},T.fromLoader=function(t,e,i){t=new Ai(t);t.url=e;t=new T(new v(t,{scaleMode:m.SCALE_MODE,resolution:Te(e)}));return v.addToCache(t.baseTexture,i=i||e),T.addToCache(t,i),i!==e&&(v.addToCache(t.baseTexture,e),T.addToCache(t,e)),t},T.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),ge[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),ge[e]=t)},T.removeFromCache=function(t){if("string"==typeof t){var e,i=ge[t];if(i)return-1<(e=i.textureCacheIds.indexOf(t))&&i.textureCacheIds.splice(e,1),delete ge[t],i}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)ge[t.textureCacheIds[r]]===t&&delete ge[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(T.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,s=e+r>this.baseTexture.width,o=i+n>this.baseTexture.height;if(s||o)throw e="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,i="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height,new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(s&&o?"and":"or")+" "+i);this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),T.prototype.castToBaseTexture=function(){return this.baseTexture},T);function T(t,e,i,r,n,s){var o=Hi.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new De(0,0,1,1)),t instanceof T&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=r,o.valid=!1,o._uvs=Vi,o.uvMatrix=null,o.orig=i||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=s?new Ue(s.x,s.y):new Ue(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}function Wi(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}zi.EMPTY=new zi(new v),Wi(zi.EMPTY),Wi(zi.EMPTY.baseTexture),zi.WHITE=((Pi=document.createElement("canvas")).width=16,Pi.height=16,(x=Pi.getContext("2d")).fillStyle="white",x.fillRect(0,0,16,16),new zi(new v(new t(Pi)))),Wi(zi.WHITE),Wi(zi.WHITE.baseTexture);_(Zi,qi=zi),Object.defineProperty(Zi.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Zi.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},Zi.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},Zi.create=function(t){return new Zi(new Xi(t="number"==typeof t?{width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t))};var qi,Ki=Zi;function Zi(t,e){var i,r,n,s,o=this,a=null;return t instanceof Xi||(i=arguments[1],r=arguments[2],n=arguments[3],s=arguments[4],console.warn("Please use RenderTexture.create("+i+", "+r+") instead of the ctor directly."),a=arguments[0],e=null,t=new Xi({width:i,height:r,scaleMode:n,resolution:s})),(o=qi.call(this,t,e)||this).legacyRenderer=a,o.valid=!0,o.filterFrame=null,o.filterPoolKey=null,o.updateUvs(),o}Qi.prototype.createTexture=function(t,e){t=new Xi(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Ki(t)},Qi.prototype.getOptimalTexture=function(t,e,i){var r=Qi.SCREEN_KEY,n=(t*=i=void 0===i?1:i,e*=i,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(r=(65535&(t=de(t)))<<16|65535&(e=de(e))),this.texturePool[r]||(this.texturePool[r]=[]),this.texturePool[r].pop());return(n=n||this.createTexture(t,e)).filterPoolKey=r,n.setResolution(i),n},Qi.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},Qi.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},Qi.prototype.returnFilterTexture=function(t){this.returnTexture(t)},Qi.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},Qi.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=Qi.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},Qi.SCREEN_KEY="screen";var Ji=Qi;function Qi(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}tr.prototype.destroy=function(){this.buffer=null},tr.from=function(t,e,i,r,n){return new tr(t,e,i,r,n)};var $i=tr;function tr(t,e,i,r,n,s,o){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=n,this.start=s,this.instance=o}var er=0,ir=(rr.prototype.update=function(t){this.data=t||this.data,this._updateID++},rr.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},rr.prototype.destroy=function(){this.dispose(),this.data=null},rr.from=function(t){return new rr(t=t instanceof Array?new Float32Array(t):t)},rr);function rr(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=er++,this.disposeRunner=new u("disposeBuffer")}function nr(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var sr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var or={5126:4,5123:2,5121:1},ar=0,hr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},l=(ur.prototype.addAttribute=function(t,e,i,r,n,s,o,a){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ir||(e instanceof Array&&(e=new Float32Array(e)),e=new ir(e));var h=t.split("|");if(1<h.length)for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,i,r,n);else{var l=this.buffers.indexOf(e);-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new $i(l,i,r,n,s,o,a),this.instanced=this.instanced||a}return this},ur.prototype.getAttribute=function(t){return this.attributes[t]},ur.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},ur.prototype.addIndex=function(t){return t instanceof ir||(t instanceof Array&&(t=new Uint16Array(t)),t=new ir(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},ur.prototype.getIndex=function(){return this.indexBuffer},ur.prototype.interleave=function(){if(!(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)){var t,e=[],i=[],r=new ir;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),i.push(n.size*or[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},s=0;s<t.length;s++)r+=e[s],i+=t[s].length;for(var o=new ArrayBuffer(4*i),a=null,h=0,s=0;s<t.length;s++){var u=e[s],l=t[s],c=nr(l);n[c]||(n[c]=new sr[c](o));for(var a=n[c],d=0;d<l.length;d++)a[(d/u|0)*r+h+d%u]=l[d];h+=u}return new Float32Array(o)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer)}return this},ur.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},ur.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},ur.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},ur.prototype.clone=function(){for(var t=new ur,e=0;e<this.buffers.length;e++)t.buffers[e]=new ir(this.buffers[e].data.slice(0));for(e in this.attributes){var i=this.attributes[e];t.attributes[e]=new $i(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},ur.merge=function(t){for(var e=new ur,i=[],r=[],n=[],s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.buffers.length;a++)r[a]=r[a]||0,r[a]+=o.buffers[a].data.length,n[a]=0;for(s=0;s<o.buffers.length;s++)i[s]=new hr[nr(o.buffers[s].data)](r[s]),e.buffers[s]=new ir(i[s]);for(s=0;s<t.length;s++){o=t[s];for(a=0;a<o.buffers.length;a++)i[a].set(o.buffers[a].data,n[a]),n[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.index=!0;for(var h=0,u=0,l=0,c=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){c=s;break}for(s in o.attributes){var d=o.attributes[s];(0|d.buffer)===c&&(u+=d.size*or[d.type]/4)}for(s=0;s<t.length;s++){for(var p=t[s].indexBuffer.data,a=0;a<p.length;a++)e.indexBuffer.data[a+l]+=h;h+=o.buffers[c].data.length/u,l+=p.length}}return e},ur);function ur(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=ar++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new u("disposeGeometry"),this.refCount=0}_(dr,lr=l);var lr,cr=dr;function dr(){var t=lr.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}_(mr,pr=l),mr.prototype.map=function(t,e){var i;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,t=e.x,i=e.y,this.vertices[0]=t,this.vertices[1]=i,this.vertices[2]=t+e.width,this.vertices[3]=i,this.vertices[4]=t+e.width,this.vertices[5]=i+e.height,this.vertices[6]=t,this.vertices[7]=i+e.height,this.invalidate(),this},mr.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this};var pr,fr=mr;function mr(){var t=pr.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new ir(t.vertices),t.uvBuffer=new ir(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var yr=0,_r=(vr.prototype.update=function(){this.dirtyId++},vr.prototype.add=function(t,e,i){this.uniforms[t]=new vr(e,i)},vr.from=function(t,e){return new vr(t,e)},vr);function vr(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=yr++,this.static=!!e}xr.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var gr=xr;function xr(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new De,this.destinationFrame=new De,this.filters=[]}_(Tr,br=E),Tr.prototype.push=function(t,e){for(var i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new gr,s=e[0].resolution,o=e[0].padding,a=e[0].autoFit,h=e[0].legacy,u=1;u<e.length;u++)var l=e[u],s=Math.min(s,l.resolution),o=this.useMaxPadding?Math.max(o,l.padding):o+l.padding,a=a&&l.autoFit,h=h||l.legacy;1===r.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),r.push(n),n.resolution=s,n.legacy=h,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(o),a&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(s),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,s),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;r=this.tempRect;r.width=n.sourceFrame.width,r.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,i.renderTexture.bind(n.renderTexture,n.sourceFrame,r),i.renderTexture.clear()},Tr.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters,r=(this.activeState=e,this.globalUniforms.uniforms),n=(r.outputFrame=e.sourceFrame,r.resolution=e.resolution,r.inputSize),s=r.inputPixel,o=r.inputClamp,n=(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=n[0]*e.resolution,s[1]=n[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy&&((o=r.filterArea)[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=e.sourceFrame.x,o[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp),this.globalUniforms.update(),t[t.length-1]);if(1<e.renderTexture.framebuffer.multisample&&this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,n.renderTexture,re.BLEND,e),this.returnFilterTexture(e.renderTexture);else{for(var a=e.renderTexture,h=((l=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame,0),h=0;h<i.length-1;++h){i[h].apply(this,a,l,re.CLEAR,e);var u=a,a=l,l=u}i[h].apply(this,a,n.renderTexture,re.BLEND,e),this.returnFilterTexture(a),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},Tr.prototype.bindAndClear=function(t,e){var i;void 0===e&&(e=re.CLEAR),t&&t.filterFrame?((i=this.tempRect).width=t.filterFrame.width,i.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,i)):this.renderer.renderTexture.bind(t),"boolean"==typeof e&&(e=e?re.CLEAR:re.BLEND,_e("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===re.CLEAR||e===re.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},Tr.prototype.applyFilter=function(t,e,i,r){var n=this.renderer;this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.state.set(t.state),n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(Kt.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(Kt.TRIANGLE_STRIP))},Tr.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,i=i.destinationFrame,n=e._texture.orig,t=t.set(i.width,0,0,i.height,r.x,r.y),i=e.worldTransform.copyTo(Xe.TEMP_MATRIX);return i.invert(),t.prepend(i),t.scale(1/n.width,1/n.height),t.translate(e.anchor.x,e.anchor.y),t},Tr.prototype.destroy=function(){this.texturePool.clear(!1)},Tr.prototype.getOptimalFilterTexture=function(t,e,i){return this.texturePool.getOptimalTexture(t,e,i=void 0===i?1:i)},Tr.prototype.getFilterTexture=function(t,e){"number"==typeof t&&(i=t,t=e,e=i),t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},Tr.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},Tr.prototype.emptyPool=function(){this.texturePool.clear(!0)},Tr.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)};var br,Er=Tr;function Tr(t){var e=br.call(this,t)||this;return e.defaultFilterStack=[{}],e.texturePool=new Ji,e.texturePool.setScreenSize(t.view),e.statePool=[],e.quad=new cr,e.quadUv=new fr,e.tempRect=new De,e.activeState={},e.globalUniforms=new _r({outputFrame:e.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),e.forceClear=!1,e.useMaxPadding=!1,e}Ar.prototype.flush=function(){},Ar.prototype.destroy=function(){this.renderer=null},Ar.prototype.start=function(){},Ar.prototype.stop=function(){this.flush()},Ar.prototype.render=function(t){};var wr=Ar;function Ar(t){this.renderer=t}_(Rr,Or=E),Rr.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},Rr.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},Rr.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},Rr.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;0<=r;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},Rr.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<r&&e[l]===u)s[h]=l;else for(;a<r;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){s[h]=a,e[u._batchLocation=a]=u;break}a++}}};var Or,Ir=Rr;function Rr(t){var e=Or.call(this,t)||this;return e.emptyRenderer=new wr(t),e.currentRenderer=e.emptyRenderer,e}var Sr,Pr=0,Cr=(_(Mr,Sr=E),Object.defineProperty(Mr.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Mr.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Pr++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Mr.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Pr++,this.renderer.runners.contextChange.emit(t)},Mr.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Mr.prototype.createContext=function(t,e){var i;if(i=m.PREFER_ENV>=Vt.WEBGL2?t.getContext("webgl2",e):i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},Mr.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},Mr.prototype.handleContextLost=function(t){t.preventDefault()},Mr.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Mr.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Mr.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Mr.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext,e=(i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly"),i||!!t.getExtension("OES_element_index_uint"));(this.supports.uint32Indices=e)||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},Mr);function Mr(t){var e=Sr.call(this,t)||this;return e.webGLVersion=1,e.extensions={},e.supports={uint32Indices:!1},e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),t.view.addEventListener("webglcontextlost",e.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e}var Nr,Lr=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=ae.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Dr=new De,Ur=(_(w,Nr=E),w.prototype.contextChange=function(){var e,t,i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new De,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,m.PREFER_ENV===Vt.WEBGL_LEGACY&&(t=e=null),e?i.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,i.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=i.getInternalformatParameter(i.RENDERBUFFER,i.RGBA8,i.SAMPLES)},w.prototype.bind=function(t,e){var i=this.gl;if(t){var r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var s=t.colorTextures[n];this.renderer.texture.unbind(s.parentTextureArray||s)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},w.prototype.setViewport=function(t,e,i,r){var n=this.viewport;n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(w.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),w.prototype.clear=function(t,e,i,r,n){void 0===n&&(n=qt.COLOR|qt.DEPTH);var s=this.gl;s.clearColor(t,e,i,r),s.clear(n)},w.prototype.initFramebuffer=function(t){var e=this.gl,e=new Lr(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},w.prototype.resizeFramebuffer=function(t){for(var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],r=(i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height)),t.colorTextures),n=0;n<r.length;n++)this.renderer.texture.bind(r[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},w.prototype.updateFramebuffer=function(t){for(var e,i,r,n=this.gl,s=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures.length,a=(n.drawBuffers||(o=Math.min(o,1)),1<s.multisample&&(s.msaaBuffer=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,s.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,s.msaaBuffer)),[]),h=0;h<o;h++)0===h&&1<s.multisample||(i=(e=t.colorTextures[h]).parentTextureArray||e,this.renderer.texture.bind(i,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+h,e.target,i._glTextures[this.CONTEXT_UID].texture,0),a.push(n.COLOR_ATTACHMENT0+h));1<a.length&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture&&(r=t.depthTexture,this.renderer.texture.bind(r,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,r._glTextures[this.CONTEXT_UID].texture,0)),s.stencil||!t.stencil&&!t.depth||(s.stencil=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,s.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),t.depthTexture||n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s.stencil))},w.prototype.detectSamples=function(t){var e=this.msaaSamples,i=ae.NONE;if(!(t<=1||null===e)){for(var r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}1===i&&(i=ae.NONE)}return i},w.prototype.blit=function(t,e,i){var r=this.current,n=this.renderer,s=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&r){n=r.glFramebuffers[o];if(n){if(!t){if(n.multisample<=1)return;n.blitFramebuffer||(n.blitFramebuffer=new Fi(r.width,r.height),n.blitFramebuffer.addColorTexture(0,r.colorTextures[0])),(t=n.blitFramebuffer).width=r.width,t.height=r.height}e||((e=Dr).width=r.width,e.height=r.height);o=e.width===(i=i||e).width&&e.height===i.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,n.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,s.COLOR_BUFFER_BIT,o?s.NEAREST:s.LINEAR)}}},w.prototype.disposeFramebuffer=function(t,e){var i,r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;r&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(i=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)))},w.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},w.prototype.forceStencil=function(){var t,e,i,r,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.enableStencil(),e=n.width,n=n.height,r=(i=this.gl).createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,n),t.stencil=r,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r))},w.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new De},w);function w(t){t=Nr.call(this,t)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new Fi(10,10),t.msaaSamples=null,t}var Fr,Br=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},kr={5126:4,5123:2,5121:1},Xr=(_(A,Fr=E),A.prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,i=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==i.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=m.PREFER_ENV===Vt.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==i.webGLVersion&&((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return s.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return s.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===i.webGLVersion||!!i.extensions.uint32ElementIndex},A.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1,r=(r||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0),r[e.program.id]||this.initGeometryVao(t,e.program,n));this._activeGeometry=t,this._activeVao!==r&&(this._activeVao=r,this.hasVao?i.bindVertexArray(r):this.activateVao(t,e.program)),this.updateBuffers()},A.prototype.reset=function(){this.unbind()},A.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var r,n,s=t.buffers[i],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,r=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(r,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(r,0,s.data):(n=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(r,s.data,n)))}},A.prototype.checkCompatibility=function(t,e){var i,r=t.attributes;for(i in e.attributeData)if(!r[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},A.prototype.getSignature=function(t,e){var i,r=t.attributes,n=e.attributeData,s=["g",t.id];for(i in r)n[i]&&s.push(i);return s.join("-")},A.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0),this.checkCompatibility(t,e);var r=this.gl,n=this.CONTEXT_UID,s=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],a=o[s];if(a)return o[e.id]=a;var h,u=t.buffers,l=t.attributes,c={},d={};for(h in u)c[h]=0,d[h]=0;for(h in l)!l[h].size&&e.attributeData[h]?l[h].size=e.attributeData[h].size:l[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[l[h].buffer]+=l[h].size*kr[l[h].type];for(h in l){var p=l[h],f=p.size;void 0===p.stride&&(c[p.buffer]===f*kr[p.type]?p.stride=0:p.stride=c[p.buffer]),void 0===p.start&&(p.start=d[p.buffer],d[p.buffer]+=f*kr[p.type])}a=r.createVertexArray(),r.bindVertexArray(a);for(var m=0;m<u.length;m++){var y=u[m];y._glBuffers[n]||(y._glBuffers[n]=new Br(r.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),i&&y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=a,o[e.id]=a,o[s]=a},A.prototype.disposeBuffer=function(t,e){var i,r;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],i=t._glBuffers[this.CONTEXT_UID],r=this.gl,t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID]))},A.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),i){for(var s=0;s<n.length;s++){var o=n[s]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(n[s],e)}if(!e)for(var a in i)"g"===a[0]&&(a=i[a],this._activeVao===a&&this.unbind(),r.deleteVertexArray(a));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},A.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);for(e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},A.prototype.activateVao=function(t,e){var i,r=this.gl,n=this.CONTEXT_UID,s=t.buffers,o=t.attributes,a=(t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer),null);for(i in o){var h=o[i],u=s[h.buffer]._glBuffers[n];if(e.attributeData[i]){a!==u&&(r.bindBuffer(r.ARRAY_BUFFER,u.buffer),a=u);u=e.attributeData[i].location;if(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(u,1)}}}},A.prototype.draw=function(t,e,i,r){var n,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(n=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===n||4===n&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(i||0)*n,r||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(i||0)*n):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,i,e||a.getSize(),r||1):o.drawArrays(t,i,e||a.getSize()),this},A.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},A);function A(t){t=Fr.call(this,t)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}Yr.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=oe.NONE,this.autoDetect=!0),this._target=null},Yr.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var jr=Yr;function Yr(t){void 0===t&&(t=null),this.type=oe.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}function Gr(t,e,i){e=t.createShader(e);return t.shaderSource(e,i),t.compileShader(e),e}function Hr(t,e,i,r){var n=Gr(t,t.VERTEX_SHADER,e),s=Gr(t,t.FRAGMENT_SHADER,i),o=t.createProgram();if(t.attachShader(o,n),t.attachShader(o,s),r)for(var a in r)t.bindAttribLocation(o,r[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(n),t.deleteShader(s),o}function Vr(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function zr(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Vr(2*e);case"bvec3":return Vr(3*e);case"bvec4":return Vr(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Wr,qr={},Kr=qr;function Zr(){var t,e;return(Kr===qr||Kr&&Kr.isContextLost())&&(t=document.createElement("canvas"),e=void 0,(e=m.PREFER_ENV>=Vt.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Kr=e),Kr}function Jr(t,e,i){return"precision"!==t.substring(0,9)?"precision "+(e===se.HIGH&&i!==se.HIGH?se.MEDIUM:e)+" float;\n"+t:i!==se.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Qr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var $r=null,tn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function en(t,e){if(!$r){var i=Object.keys(tn);$r={};for(var r=0;r<i.length;++r){var n=i[r];$r[t[n]]=tn[n]}}return $r[e]}var rn=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],nn={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},sn={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var on,an=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function hn(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=an.replace(/%forloop%/gi,function(t){for(var e="",i=0;i<t;++i)0<i&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var un=0,ln={},cn=(dn.prototype.extractData=function(t,e){var i=Zr();i?(t=Hr(i,t,e),this.attributeData=this.getAttributeData(t,i),this.uniformData=this.getUniformData(t,i),i.deleteProgram(t)):(this.uniformData={},this.attributeData={})},dn.prototype.getAttributeData=function(t,e){for(var i={},r=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var o=e.getActiveAttrib(t,s),a=en(e,o.type),a={type:a,name:o.name,size:Qr[a],location:0};i[o.name]=a,r.push(a)}r.sort(function(t,e){return t.name>e.name?1:-1});for(s=0;s<r.length;s++)r[s].location=s;return i},dn.prototype.getUniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=s.name.match(/\[.*?\]$/),h=en(e,s.type);i[o]={type:h,size:s.size,isArray:a,value:zr(h,s.size)}}return i},Object.defineProperty(dn,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(dn,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),dn.from=function(t,e,i){var r=t+e,n=ve[r];return n||(ve[r]=n=new dn(t,e,i)),n},dn);function dn(t,e,i){void 0===i&&(i="pixi-shader"),this.id=un++,this.vertexSrc=t||dn.defaultVertexSrc,this.fragmentSrc=e||dn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),ln[i]?(ln[i]++,i+="-"+ln[i]):ln[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=Jr(this.vertexSrc,m.PRECISION_VERTEX,se.HIGH),this.fragmentSrc=Jr(this.fragmentSrc,m.PRECISION_FRAGMENT,(Wr||(Wr=se.MEDIUM,(t=Zr())&&t.getShaderPrecisionFormat&&(t=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),Wr=t.precision?se.HIGH:se.MEDIUM)),Wr))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}fn.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){i=e.uniforms[i];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},fn.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(fn.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),fn.from=function(t,e,i){return new fn(cn.from(t,e),i)};var pn=fn;function fn(t,e){for(var i in this.program=t,e?e instanceof _r?this.uniformGroup=e:this.uniformGroup=new _r(e):this.uniformGroup=new _r({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}Object.defineProperty(yn.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(yn.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(yn.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(yn.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(yn.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(yn.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==h.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(yn.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),yn.for2d=function(){var t=new yn;return t.depthTest=!1,t.blend=!0,t};var mn=yn;function yn(){this.data=0,this.blendMode=h.NORMAL,this.polygonOffset=0,this.blend=!0}_(vn,_n=pn),vn.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(vn.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(vn,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(vn,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0});var _n,n=vn;function vn(t,e,i){var r=this,t=cn.from(t||vn.defaultVertexSrc,e||vn.defaultFragmentSrc);return(r=_n.call(this,t,i)||this).padding=0,r.resolution=m.FILTER_RESOLUTION,r.enabled=!0,r.autoFit=!0,r.legacy=!!r.program.attributeData.aTextureCoord,r.state=new mn,r}var gn=new Xe,xn=(Object.defineProperty(bn.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),bn.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],s=t[r+1];e[r]=n*i.a+s*i.c+i.tx,e[r+1]=n*i.b+s*i.d+i.ty}return e},bn.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var t=e._uvs,t=(this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0),e.orig),i=e.trim,t=(i&&(gn.set(t.width/i.width,0,0,t.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(gn)),e.baseTexture),i=this.uClampFrame,r=this.clampMargin/t.resolution,n=this.clampOffset;return i[0]=(e._frame.x+r+n)/t.width,i[1]=(e._frame.y+r+n)/t.height,i[2]=(e._frame.x+e._frame.width-r+n)/t.width,i[3]=(e._frame.y+e._frame.height-r+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},bn);function bn(t,e){this._texture=t,this.mapCoord=new Xe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}_(wn,En=n),wn.prototype.apply=function(t,e,i,r){var n=this.maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new xn(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))};var En,Tn=wn;function wn(t){var e=this,i=new Xe,e=En.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return t.renderable=!1,e.maskSprite=t,e.maskMatrix=i,e}_(In,An=E),In.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},In.prototype.push=function(t,e){var i,r=e;switch(r.isMaskData||((i=this.maskDataPool.pop()||new jr).pooled=!0,i.maskObject=e,r=i),r.autoDetect&&this.detect(r),r.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),r._target=t,r.type){case oe.SCISSOR:this.maskStack.push(r),this.renderer.scissor.push(r);break;case oe.STENCIL:this.maskStack.push(r),this.renderer.stencil.push(r);break;case oe.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r),this.maskStack.push(r)}},In.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case oe.SCISSOR:this.renderer.scissor.pop();break;case oe.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case oe.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},In.prototype.detect=function(t){var e,i=t.maskObject;i.isSprite?t.type=oe.SPRITE:(t.type=oe.STENCIL,this.enableScissor&&i.isFastRect&&i.isFastRect()&&(i=i.worldTransform,e=Math.atan2(i.b,i.a),i=Math.atan2(i.d,i.c),e=Math.round(e*(180/Math.PI)*100),i=Math.round(i*(180/Math.PI)*100)-e,0==(e=(e%9e3+9e3)%9e3)&&9e3==(i=(i%18e3+18e3)%18e3)&&(t.type=oe.SCISSOR)))},In.prototype.pushSpriteMask=function(t){var e=t.maskObject,t=t._target,i=this.alphaMaskPool[this.alphaMaskIndex],r=((i=i||(this.alphaMaskPool[this.alphaMaskIndex]=[new Tn(e)]))[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea);t.filterArea=e.getBounds(!0),this.renderer.filter.push(t,i),t.filterArea=r,this.alphaMaskIndex++},In.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--};var An,On=In;function In(t){t=An.call(this,t)||this;return t.enableScissor=!1,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}_(Sn,Rn=E),Sn.prototype.getStackLength=function(){return this.maskStack.length},Sn.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength(),t=(this.maskStack=t,this.getStackLength());t!==i&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},Sn.prototype._useCurrent=function(){},Sn.prototype.destroy=function(){Rn.prototype.destroy.call(this),this.maskStack=null};var Rn,x=Sn;function Sn(t){t=Rn.call(this,t)||this;return t.maskStack=[],t.glConst=0,t}_(Mn,Pn=x),Mn.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},Mn.prototype.push=function(t){var e=t.maskObject,i=(e.renderable=!0,t._scissorRect),r=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,i?r.fit(i):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=r,this._useCurrent()},Mn.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},Mn.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,r=i.transform,n=i.sourceFrame,i=i.destinationFrame,s=(e||this.renderer).resolution,o=(t.x-n.x)*s+i.x,n=(t.y-n.y)*s+i.y,i=t.width*s,t=t.height*s;r&&(o+=r.tx*s,n+=r.ty*s),e||(n=this.renderer.height-t-n),this.renderer.gl.scissor(o,n,i,t)};var Pn,Cn=Mn;function Mn(t){t=Pn.call(this,t)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}_(Dn,Nn=x),Dn.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},Dn.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},Dn.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},Dn.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},Dn.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1};var Nn,Ln=Dn;function Dn(t){t=Nn.call(this,t)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}_(Bn,Un=E),Bn.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);e=this.renderer;e.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,e.globalUniforms.update(),e.shader.shader&&e.shader.syncUniformGroup(e.shader.shader.uniforms.globals)},Bn.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,r=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=r*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-r-e.y*n.d},Bn.prototype.setTransform=function(t){};var Un,Fn=Bn;function Bn(t){t=Un.call(this,t)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Xe,t.transform=null,t}var kn,Xn=new De,jn=new De,Yn=new De,Gn=(_(Hn,kn=E),Hn.prototype.bind=function(t,e,i){var r,n,s,o=this.renderer;(this.current=t=void 0===t?null:t)?(s=(r=t.baseTexture).resolution,e||(Xn.width=t.frame.width,Xn.height=t.frame.height,e=Xn),i||(jn.x=t.frame.x,jn.y=t.frame.y,jn.width=e.width,jn.height=e.height,i=jn),n=r.framebuffer):(s=o.resolution,e||(Xn.width=o.screen.width,Xn.height=o.screen.height,e=Xn),i||((i=Xn).width=e.width,i.height=e.height)),Yn.x=i.x*s,Yn.y=i.y*s,Yn.width=i.width*s,Yn.height=i.height*s,this.renderer.framebuffer.bind(n,Yn),this.renderer.projection.update(i,e,s,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},Hn.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},Hn.prototype.resize=function(){this.bind(null)},Hn.prototype.reset=function(){this.bind(null)},Hn);function Hn(t){var e=kn.call(this,t)||this;return e.clearColor=t._backgroundColorRgba,e.defaultMaskStack=[],e.current=null,e.sourceFrame=new De,e.destinationFrame=new De,e}zn.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var Vn=zn;function zn(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var Wn,qn=0,Kn={textureCount:0},Zn=(_(Jn,Wn=E),Jn.prototype.systemCheck=function(){if(!function(){if("boolean"!=typeof on)try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");on=!0===t({a:"b"},"a","b")}catch(t){on=!1}return on}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},Jn.prototype.contextChange=function(t){this.gl=t,this.reset()},Jn.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(Kn.textureCount=0,this.syncUniformGroup(t.uniformGroup,Kn)),r},Jn.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},Jn.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},Jn.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},Jn.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i,r=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(i in t.uniforms){var n=e[i];if(n){for(var s,o=t.uniforms[i],a=!1,h=0;h<rn.length;h++)if(rn[h].test(n,o)){r.push(rn[h].code(i,o)),a=!0;break}a||(s=(1===n.size?nn:sn)[n.type].replace("location",'ud["'+i+'"].location'),r.push('\n            cv = ud["'+i+'"].value;\n            v = uv["'+i+'"];\n            '+s+";"))}else t.uniforms[i].group&&r.push('\n                    renderer.shader.syncUniformGroup(uv["'+i+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},Jn.prototype.getSignature=function(t,e){var i,r=[];for(i in t.uniforms)r.push(i),e[i]&&r.push(e[i].type);return r.join("-")},Jn.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},Jn.prototype.generateShader=function(t){var e=this.gl,i=t.program,r={};for(n in i.attributeData)r[n]=i.attributeData[n].location;var n,s=Hr(e,i.vertexSrc,i.fragmentSrc,r),o={};for(n in i.uniformData){var a=i.uniformData[n];o[n]={location:e.getUniformLocation(s,n),value:zr(a.type,a.size)}}t=new Vn(s,o);return i.glPrograms[this.renderer.CONTEXT_UID]=t},Jn.prototype.reset=function(){this.program=null,this.shader=null},Jn.prototype.destroy=function(){this.destroyed=!0},Jn);function Jn(t){t=Wn.call(this,t)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=qn++,t}_(O,Qn=E),O.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[h.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.ADD]=[t.ONE,t.ONE],e[h.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.NONE]=[0,0],e[h.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[h.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[h.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[h.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[h.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[h.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[h.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[h.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[h.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[h.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[h.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},O.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},O.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},O.prototype.setBlend=function(t){this.updateCheck(O.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},O.prototype.setOffset=function(t){this.updateCheck(O.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},O.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},O.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},O.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},O.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,t=this.blendModes[t],e=this.gl,2===t.length?e.blendFunc(t[0],t[1]):e.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,e.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD)))},O.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},O.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},O.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},O.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},O.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)};var Qn,$n=O;function O(t){t=Qn.call(this,t)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=h.NONE,t._blendEq=!1,t.map=[],t.map[0]=t.setBlend,t.map[1]=t.setOffset,t.map[2]=t.setCullFace,t.map[3]=t.setDepthTest,t.map[4]=t.setFrontFace,t.checks=[],t.defaultState=new mn,t.defaultState.blend=!0,t}_(is,ts=E),is.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ne.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},is.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),i=!(e[r]=null))}if(i){for(var s=0,r=0;r<e.length;r++)null!==e[r]&&(e[s++]=e[r]);e.length=s}},is.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;0<=r;r--)this.unload(t.children[r])};var ts,es=is;function is(t){t=ts.call(this,t)||this;return t.count=0,t.checkCount=0,t.maxIdle=m.GC_MAX_IDLE,t.checkCountMax=m.GC_MAX_CHECK_COUNT,t.mode=m.GC_MODE,t}var rs,ns=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},ss=(_(os,rs=E),os.prototype.contextChange=function(){var t=this.gl=this.renderer.gl,e=(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new ns(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ns(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},os.prototype.bind=function(t,e){void 0===e&&(e=0);var i,r=this.gl;t?(t=t.castToBaseTexture()).parentTextureArray||t.valid&&(t.touched=this.renderer.textureGC.count,i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null)},os.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},os.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},os.prototype.initTexture=function(t){var e=new ns(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},os.prototype.initTextureType=function(t,e){var i;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(i=this.renderer.gl,t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===Qt.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F))},os.prototype.updateTexture=function(t){var e,i,r,n=t._glTextures[this.CONTEXT_UID];n&&(r=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(r,t,n)||(e=t.realWidth,i=t.realHeight,r=r.gl,(n.width!==e||n.height!==i||n.dirtyId<0)&&(n.width=e,n.height=i,r.texImage2D(t.target,0,n.internalFormat,e,i,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},os.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){i=this.managedTextures.indexOf(t);if(-1!==i){var r=this.managedTextures,e=i,n=1,t=r.length;if(!(t<=e||0===n)){for(var s=t-(n=t<e+n?t-e:n),o=e;o<s;++o)r[o]=r[o+n];r.length=s}}}},os.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==ee.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=te.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},os.prototype.setStyle=function(t,e){var i,r=this.gl;e.mipmap&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===$t.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST),(e=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===$t.LINEAR&&(i=Math.min(t.anisotropicLevel,r.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),r.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,i))):r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===$t.LINEAR?r.LINEAR:r.NEAREST),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===$t.LINEAR?r.LINEAR:r.NEAREST)},os);function os(t){t=rs.call(this,t)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new v,t}var as,hs=new Xe,t=(_(us,as=Ct.a),us.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(us.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(us.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),us.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},us.prototype.generateTexture=function(t,e,i,r){0===(r=r||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);e=Ki.create({width:0|r.width,height:0|r.height,scaleMode:e,resolution:i});return hs.tx=-r.x,hs.ty=-r.y,this.render(t,e,!1,hs,!!t.parent),e},us.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);t=this;t.plugins=null,t.type=Wt.UNKNOWN,t.view=null,t.screen=null,t._tempDisplayObjectParent=null,t.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(us.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=(e=t).toString(16),"#"+("000000".substr(0,6-e.length)+e)),e=t,(t=void 0===(t=this._backgroundColorRgba)?[]:t)[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255},enumerable:!1,configurable:!0}),us);function us(t,e){void 0===t&&(t=Wt.UNKNOWN);var i=as.call(this)||this;return(e=Object.assign({},m.RENDER_OPTIONS,e)).roundPixels&&(m.ROUND_PIXELS=e.roundPixels,_e("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),i.options=e,i.type=t,i.screen=new De(0,0,e.width,e.height),i.view=e.view||document.createElement("canvas"),i.resolution=e.resolution||m.RESOLUTION,i.transparent=e.transparent,i.autoDensity=e.autoDensity||e.autoResize||!1,i.preserveDrawingBuffer=e.preserveDrawingBuffer,i.clearBeforeRender=e.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=e.backgroundColor||i._backgroundColor,i._lastObjectRendered=null,i.plugins={},i}_(ds,ls=t),ds.create=function(t){if(he=void 0===he?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:m.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e,i=document.createElement("canvas"),r=i.getContext("webgl",t)||i.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);return r&&(e=r.getExtension("WEBGL_lose_context"))&&e.loseContext(),r=null,n}catch(t){return!1}}():he)return new ds(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},ds.prototype.addSystem=function(t,e){e=e||t.name;var i,r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(i in this[e]=r,this.runners)this.runners[i].add(r);return this},ds.prototype.render=function(t,e,i,r,n){this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,this.context.isLost||(e||(this._lastObjectRendered=t),n||(r=t.enableTempParent(),t.updateTransform(),t.disableTempParent(r)),this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},ds.prototype.resize=function(t,e){ls.prototype.resize.call(this,t,e),this.runners.resize.emit(t,e)},ds.prototype.reset=function(){return this.runners.reset.emit(),this},ds.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},ds.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();ls.prototype.destroy.call(this,t),this.gl=null},ds.registerPlugin=function(t,e){(ds.__plugins=ds.__plugins||{})[t]=e};var ls,cs=ds;function ds(t){var e,i=ls.call(this,Wt.WEBGL,t)||this;return t=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new u("destroy"),contextChange:new u("contextChange"),reset:new u("reset"),update:new u("update"),postrender:new u("postrender"),prerender:new u("prerender"),resize:new u("resize")},i.globalUniforms=new _r({projectionMatrix:new Xe},!0),i.addSystem(On,"mask").addSystem(Cr,"context").addSystem($n,"state").addSystem(Zn,"shader").addSystem(ss,"texture").addSystem(Xr,"geometry").addSystem(Ur,"framebuffer").addSystem(Cn,"scissor").addSystem(Ln,"stencil").addSystem(Fn,"projection").addSystem(es,"textureGC").addSystem(Er,"filter").addSystem(Gn,"renderTexture").addSystem(Ir,"batch"),i.initPlugins(ds.__plugins),t.context?i.context.initFromContext(t.context):i.context.initFromOptions({alpha:!!i.transparent,antialias:t.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,t=2===i.context.webGLVersion?"WebGL 2":"WebGL 1",ue||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(e=window.console).log.apply(e,["\n %c %c %c PixiJS "+le+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS "+le+" - "+t+" - http://www.pixijs.com/"),ue=!0),i.resize(i.options.width,i.options.height),i}var ps=function(){this.texArray=null,this.blend=0,this.type=Kt.TRIANGLES,this.start=0,this.size=0,this.data=null},fs=(ms.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},ms);function ms(){this.elements=[],this.ids=[],this.count=0}Object.defineProperty(_s.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(_s.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(_s.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(_s.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(_s.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),_s.prototype.view=function(t){return this[t+"View"]},_s.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},_s.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}};var ys=_s;function _s(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}_(I,vs=wr),I.prototype.contextChange=function(){var t=this.renderer.gl;m.PREFER_ENV===Vt.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=hn(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},I.prototype.initFlushBuffers=function(){for(var t=I._drawCallPool,e=I._textureArrayPool,i=this.size/4,r=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new ps);for(;e.length<r;)e.push(new fs);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},I.prototype.onPrerender=function(){this._flushId=0},I.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},I.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,i=I._textureArrayPool,r=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++v._globalBatch,a=0,h=i[0],u=0;r.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(h.count>=e&&(r.boundArray(h,n,o,e),this.buildDrawCalls(h,u,l),u=l,h=i[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(r.boundArray(h,n,o,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++o);for(l=0;l<n.length;l++)n[l]=null;v._globalBatch=o},I.prototype.buildDrawCalls=function(t,e,i){var r=this._bufferedElements,n=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=I._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var d=e;d<i;++d){var p=r[d],f=p._texture.baseTexture,f=ce[f.alphaMode?1:0][p.blendMode];r[d]=null,e<d&&c.blend!==f&&(c.size=l-c.start,e=d,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(p,n,s,u,l),u+=p.vertexData.length/2*o,l+=p.indices.length,c.blend=f}e<i&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},I.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},I.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;m.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},I.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,i=e.gl,r=e.state,n=I._drawCallPool,s=null,o=0;o<t;o++){var a=n[o],h=a.texArray,u=a.type,l=a.size,c=a.start,a=a.blend;s!==h&&this.bindAndClearTexArray(s=h),this.state.blendMode=a,r.set(this.state),i.drawElements(u,l,i.UNSIGNED_SHORT,2*c)}},I.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},I.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),m.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},I.prototype.stop=function(){this.flush()},I.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),vs.prototype.destroy.call(this)},I.prototype.getAttributeBuffer=function(t){var t=de(Math.ceil(t/8)),e=fe(t),t=8*t,e=(this._aBuffers.length<=e&&(this._iBuffers.length=e+1),this._aBuffers[t]);return e||(this._aBuffers[t]=e=new ys(t*this.vertexSize*4)),e},I.prototype.getIndexBuffer=function(t){var t=de(Math.ceil(t/12)),e=fe(t),t=12*t,i=(this._iBuffers.length<=e&&(this._iBuffers.length=e+1),this._iBuffers[e]);return i||(this._iBuffers[e]=i=new Uint16Array(t)),i},I.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var s,o,a=e.uint32View,h=e.float32View,u=r/this.vertexSize,l=t.uvs,c=t.indices,d=t.vertexData,p=t._texture.baseTexture._batchLocation,e=Math.min(t.worldAlpha,1),f=e<1&&t._texture.baseTexture.alphaMode?(s=t._tintRGB,1===(o=e)?(255*o<<24)+s:0===o?0:(255*o<<24)+(((s>>16&255)*o+.5|0)<<16)+(((s>>8&255)*o+.5|0)<<8)+((255&s)*o+.5|0)):t._tintRGB+(255*e<<24),m=0;m<d.length;m+=2)h[r++]=d[m],h[r++]=d[m+1],h[r++]=l[m],h[r++]=l[m+1],a[r++]=f,h[r++]=p;for(m=0;m<c.length;m++)i[n++]=u+c[m]},I._drawCallPool=[],I._textureArrayPool=[];var vs,gs=I;function I(t){var e=vs.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=mn.for2d(),e.size=4*m.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}bs.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=_r.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new cn(this.vertexSrc,r)}r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Xe,default:this.defaultGroupCache[t]};return new pn(this.programCache[t],r)},bs.prototype.generateSampleSrc=function(t){for(var e=(e="")+"\n"+"\n",i=0;i<t;i++)0<i&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e=(e+="\n{")+"\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);\n}";return e=e+"\n"+"\n"};var xs=bs;function bs(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}_(ws,Es=l);var Es,Ts=ws;function ws(t){void 0===t&&(t=!1);var e=Es.call(this)||this;return e._buffer=new ir(null,t,!1),e._indexBuffer=new ir(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,Qt.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,Qt.FLOAT).addAttribute("aColor",e._buffer,4,!0,Qt.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,Qt.FLOAT).addIndex(e._indexBuffer),e}var As="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Os="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";function Is(){}Is.create=function(t){var e,t=Object.assign({vertex:As,fragment:Os,geometryClass:Ts,vertexSize:6},t),i=t.vertex,r=t.fragment,n=t.vertexSize,s=t.geometryClass;return _(o,e=gs),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new xs(i,r),t.geometryClass=s,t.vertexSize=n,t}},Object.defineProperty(Is,"defaultVertexSrc",{get:function(){return As},enumerable:!1,configurable:!0}),Object.defineProperty(Is,"defaultFragmentTemplate",{get:function(){return Os},enumerable:!1,configurable:!0});Pi=Is.create(),Rs.registerPlugin=function(t){Rs._plugins.push(t)},Rs.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(Rs.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(Rs.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),Rs.prototype.destroy=function(t,e){var i=this,r=Rs._plugins.slice(0);r.reverse(),r.forEach(function(t){t.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},n=Rs;function Rs(e){var t,i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=(t=e,cs.create(t)),this.stage=new Ht,Rs._plugins.forEach(function(t){t.init.call(i,e)})}function Ss(){}n._plugins=[],Ss.init=function(t){var i=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),(this._resizeTo=t)&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){i._resizeTo&&(i.cancelResize(),i._resizeId=requestAnimationFrame(function(){return i.resize()}))},this.cancelResize=function(){i._resizeId&&(cancelAnimationFrame(i._resizeId),i._resizeId=null)},this.resize=function(){var t,e;i._resizeTo&&(i.cancelResize(),e=i._resizeTo===window?(t=window.innerWidth,window.innerHeight):(t=(e=i._resizeTo).clientWidth,e.clientHeight),i.renderer.resize(t,e))},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},Ss.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},n.registerPlugin(Ss);var x=F(4),Ps=F.n(x),E=F(1),Cs=F.n(E);function Ms(){}function Ns(i,r,n,s){var o=0,a=i.length;!function t(e){e||o===a?n&&n(e):s?setTimeout(function(){r(i[o++],t)},1):r(i[o++],t)}()}function Ls(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,r={_tasks:[],concurrency:t,saturated:Ms,unsaturated:Ms,buffer:t/4,empty:Ms,drain:Ms,error:Ms,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){i=0,r.drain=Ms,r.started=!1,r._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!r.paused&&i<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),(i+=1)===r.concurrency&&r.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--i,t.callback.apply(t,arguments),null!=arguments[0]&&r.error(arguments[0],t.data),i<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}(t)))}},length:function(){return r._tasks.length},running:function(){return i},idle:function(){return r._tasks.length+i===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var t=1;t<=r.concurrency;t++)r.process()}}};function n(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");r.started=!0,null==t&&r.idle()?setTimeout(function(){return r.drain()},1):(t={data:t,callback:"function"==typeof i?i:Ms},e?r._tasks.unshift(t):r._tasks.push(t),setTimeout(function(){return r.process()},1))}return r}var Ds={};function Us(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fs(t,e,i){e&&Us(t.prototype,e),i&&Us(t,i)}var Bs=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),ks=null;function Xs(){}var R=function(){function s(t,e,i){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(s.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=s.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Xs,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Cs.a,this.onProgress=new Cs.a,this.onComplete=new Cs.a,this.onAfterMiddleware=new Cs.a}s.setExtensionLoadType=function(t,e){js(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){js(s._xhrTypeMap,t,e)};var t=s.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=s.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(s.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this.type=s.TYPE.IMAGE,this._loadElement("image");break;case s.LOAD_TYPE.AUDIO:this.type=s.TYPE.AUDIO,this._loadSourceElement("audio");break;case s.LOAD_TYPE.VIDEO:this.type=s.TYPE.VIDEO,this._loadSourceElement("video");break;default:s.LOAD_TYPE.XHR;Bs&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(s.STATUS_FLAGS.COMPLETE,!0),this._setFlag(s.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)this.abort("Unsupported element: "+t);else{if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=s.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,i){i=i||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=i,t},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(Ys(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(Ys(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(Ys(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t,e,i=this.xhr,r="",n=void 0===i.status?200:i.status;if(""!==i.responseType&&"text"!==i.responseType&&void 0!==i.responseType||(r=i.responseText),0===n&&(0<r.length||i.responseType===s.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2!=(n/100|0))this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL);else{if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=s.TYPE.TEXT;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=s.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(r,"text/xml")):((e=document.createElement("div")).innerHTML=r,this.data=e),this.type=s.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=i.response||r;this.complete()}},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(ks=ks||document.createElement("a")).href=t;var i=!(t=Ps()(ks.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},t._determineXhrType=function(){return s._xhrTypeMap[this.extension]||s.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return s._loadTypeMap[this.extension]||s.LOAD_TYPE.XHR},t._getExtension=function(){var t,e,i=this.url;return(this.isDataUrl?(e=i.indexOf("/"),i.substring(e+1,i.indexOf(";",e))):(e=i.indexOf("?"),t=i.indexOf("#"),e=Math.min(-1<e?e:i.length,-1<t?t:i.length),(i=i.substring(0,e)).substring(i.lastIndexOf(".")+1))).toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Fs(s,[{key:"isDataUrl",get:function(){return this._hasFlag(s.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(s.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(s.STATUS_FLAGS.LOADING)}}]),s}();function js(t,e,i){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=i)}function Ys(t){return t.toString().replace("object ","")}R.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},R.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},R.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},R.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},R._loadTypeMap={gif:R.LOAD_TYPE.IMAGE,png:R.LOAD_TYPE.IMAGE,bmp:R.LOAD_TYPE.IMAGE,jpg:R.LOAD_TYPE.IMAGE,jpeg:R.LOAD_TYPE.IMAGE,tif:R.LOAD_TYPE.IMAGE,tiff:R.LOAD_TYPE.IMAGE,webp:R.LOAD_TYPE.IMAGE,tga:R.LOAD_TYPE.IMAGE,svg:R.LOAD_TYPE.IMAGE,"svg+xml":R.LOAD_TYPE.IMAGE,mp3:R.LOAD_TYPE.AUDIO,ogg:R.LOAD_TYPE.AUDIO,wav:R.LOAD_TYPE.AUDIO,mp4:R.LOAD_TYPE.VIDEO,webm:R.LOAD_TYPE.VIDEO},R._xhrTypeMap={xhtml:R.XHR_RESPONSE_TYPE.DOCUMENT,html:R.XHR_RESPONSE_TYPE.DOCUMENT,htm:R.XHR_RESPONSE_TYPE.DOCUMENT,xml:R.XHR_RESPONSE_TYPE.DOCUMENT,tmx:R.XHR_RESPONSE_TYPE.DOCUMENT,svg:R.XHR_RESPONSE_TYPE.DOCUMENT,tsx:R.XHR_RESPONSE_TYPE.DOCUMENT,gif:R.XHR_RESPONSE_TYPE.BLOB,png:R.XHR_RESPONSE_TYPE.BLOB,bmp:R.XHR_RESPONSE_TYPE.BLOB,jpg:R.XHR_RESPONSE_TYPE.BLOB,jpeg:R.XHR_RESPONSE_TYPE.BLOB,tif:R.XHR_RESPONSE_TYPE.BLOB,tiff:R.XHR_RESPONSE_TYPE.BLOB,webp:R.XHR_RESPONSE_TYPE.BLOB,tga:R.XHR_RESPONSE_TYPE.BLOB,json:R.XHR_RESPONSE_TYPE.JSON,text:R.XHR_RESPONSE_TYPE.TEXT,txt:R.XHR_RESPONSE_TYPE.TEXT,ttf:R.XHR_RESPONSE_TYPE.BUFFER,otf:R.XHR_RESPONSE_TYPE.BUFFER},R.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Gs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var Hs=window.URL||window.webkitURL;var t={caching:function(t,e){var i=this;Ds[t.url]?(t.data=Ds[t.url],t.complete()):t.onComplete.once(function(){return Ds[i.url]=i.data}),e()},parsing:function(t,e){if(t.data&&t.xhr&&t.xhrType===R.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){var i;if(0===t.data.type.indexOf("image"))return i=Hs.createObjectURL(t.data),t.blob=t.data,t.data=new Image,t.data.src=i,t.type=R.TYPE.IMAGE,void(t.data.onload=function(){Hs.revokeObjectURL(i),t.data.onload=null,e()})}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],s=0;s<r.length;++s)i<t.length?r[s]=255&t.charCodeAt(i++):r[s]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var o=0;o<n.length;++o)e+=Gs.charAt(n[o])}return e}(t.xhr.responseText),t.type=R.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}},Vs=/(#[\w-]+)?$/,zs=function(){function s(t,e){var i=this;void 0===e&&(e=10),this.baseUrl=t=void 0===t?"":t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=Ls(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new Cs.a,this.onError=new Cs.a,this.onLoad=new Cs.a,this.onStart=new Cs.a,this.onComplete=new Cs.a;for(var r=0;r<s._defaultBeforeMiddleware.length;++r)this.pre(s._defaultBeforeMiddleware[r]);for(var n=0;n<s._defaultAfterMiddleware.length;++n)this.use(s._defaultAfterMiddleware[n])}var t=s.prototype;return t.add=function(t,e,i,r){if(Array.isArray(t))for(var n=0;n<t.length;++n)this.add(t[n]);else{if("object"==typeof t&&(r=e||t.callback||t.onComplete,e=(i=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new R(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var s=i.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var u=0;u<o.length;++u)o[u].progressChunk=h;this.resources[t].progressChunk=h}this._queue.push(this.resources[t])}return this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),!this.loading)if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e=Ps()(t,{strictMode:!0});return e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(t=Vs.exec(e)[0],-1!==(e=e.substr(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},t._loadResource=function(i,t){var r=this;i._dequeue=t,Ns(this._beforeMiddleware,function(t,e){t.call(r,i,function(){e(i.isComplete?{}:null)})},function(){i.isComplete?r._onLoad(i):(i._onLoadBinding=i.onComplete.once(r._onLoad,r),i.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(i){var r=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),Ns(this._afterMiddleware,function(t,e){t.call(r,i,e)},function(){i.onAfterMiddleware.dispatch(i),r.progress=Math.min(100,r.progress+i.progressChunk),r.onProgress.dispatch(r,i),i.error?r.onError.dispatch(i.error,r,i):r.onLoad.dispatch(r,i),r._resourcesParsing.splice(r._resourcesParsing.indexOf(i),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},Fs(s,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),s}(),Ws=(zs._defaultBeforeMiddleware=[],zs._defaultAfterMiddleware=[],zs.pre=function(t){return zs._defaultBeforeMiddleware.push(t),zs},zs.use=function(t){return zs._defaultAfterMiddleware.push(t),zs},function(t,e){return(Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)});qs.use=function(t,e){t.data&&t.type===R.TYPE.IMAGE&&(t.texture=zi.fromLoader(t.data,t.url,t.name)),e()};l=qs;function qs(){}Ws(Zs=$s,x=Ks=zs),Zs.prototype=null===x?Object.create(x):(Qs.prototype=x.prototype,new Qs),$s.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty($s,"shared",{get:function(){var t=$s._shared;return t||((t=new $s)._protected=!0,$s._shared=t),t},enumerable:!1,configurable:!0}),$s.registerPlugin=function(t){return $s._plugins.push(t),t.add&&t.add(),$s},$s._plugins=[];var Ks,Zs,Js=$s;function Qs(){this.constructor=Zs}function $s(t,e){for(var i=Ks.call(this,t,e)||this,r=0;r<$s._plugins.length;++r){var n=$s._plugins[r],s=n.pre,n=n.use;s&&i.pre(s),n&&i.use(n)}return i._protected=!1,i}Js.registerPlugin({use:t.parsing}),Js.registerPlugin(l);eo.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Js.shared:new Js},eo.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var to,F=eo;function eo(){}(E=to=to||{})[E.NORMAL=0]="NORMAL",E[E.ADD=1]="ADD",E[E.MULTIPLY=2]="MULTIPLY",E[E.SCREEN=3]="SCREEN",E[E.OVERLAY=4]="OVERLAY",E[E.DARKEN=5]="DARKEN",E[E.LIGHTEN=6]="LIGHTEN",E[E.COLOR_DODGE=7]="COLOR_DODGE",E[E.COLOR_BURN=8]="COLOR_BURN",E[E.HARD_LIGHT=9]="HARD_LIGHT",E[E.SOFT_LIGHT=10]="SOFT_LIGHT",E[E.DIFFERENCE=11]="DIFFERENCE",E[E.EXCLUSION=12]="EXCLUSION",E[E.HUE=13]="HUE",E[E.SATURATION=14]="SATURATION",E[E.COLOR=15]="COLOR",E[E.LUMINOSITY=16]="LUMINOSITY",E[E.NORMAL_NPM=17]="NORMAL_NPM",E[E.ADD_NPM=18]="ADD_NPM",E[E.SCREEN_NPM=19]="SCREEN_NPM",E[E.NONE=20]="NONE",E[E.SRC_OVER=0]="SRC_OVER",E[E.SRC_IN=21]="SRC_IN",E[E.SRC_OUT=22]="SRC_OUT",E[E.SRC_ATOP=23]="SRC_ATOP",E[E.DST_OVER=24]="DST_OVER",E[E.DST_IN=25]="DST_IN",E[E.DST_OUT=26]="DST_OUT",E[E.DST_ATOP=27]="DST_ATOP",E[E.ERASE=26]="ERASE",E[E.SUBTRACT=28]="SUBTRACT",E[E.XOR=29]="XOR",(x={NPM:0,0:"NPM",UNPACK:1,1:"UNPACK",PMA:2,2:"PMA",NO_PREMULTIPLIED_ALPHA:0})[0]="NO_PREMULTIPLIED_ALPHA",x[x.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",x[x.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(t={NO:0,0:"NO",YES:1,1:"YES",AUTO:2,2:"AUTO",BLEND:0})[0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT";l=tt(window.navigator);var io,ro={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(E=32,x=!0,(l.tablet||l.phone)&&(l.apple.device&&(Bo=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(Bo[1],10)<11&&(x=!1),l.android.device&&(Bo=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(Bo[1],10)<7&&(x=!1)),x?E:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:l.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!l.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},no=2*Math.PI,so=180/Math.PI,oo=Math.PI/180,ao=((t=io=io||{})[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",Object.defineProperty(S.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(S,"EMPTY",{get:function(){return new S(0,0,0,0)},enumerable:!1,configurable:!0}),S.prototype.clone=function(){return new S(this.x,this.y,this.width,this.height)},S.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},S.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},S.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},S.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},S.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(t-r,0),this},S.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},S.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=t-r,this},S);function S(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=io.RECT}uo.prototype.clone=function(){return new uo(this.x,this.y)},uo.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},uo.prototype.copyTo=function(t){return t.set(this.x,this.y),t},uo.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},uo.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this};var ho=uo;function uo(t,e){void 0===e&&(e=0),this.x=t=void 0===t?0:t,this.y=e}co.prototype.clone=function(t,e){return new co(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},co.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},co.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},co.prototype.copyTo=function(t){return t.set(this._x,this._y),t},co.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(co.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(co.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0});var lo=co;function co(t,e,i,r){void 0===r&&(r=0),this._x=i=void 0===i?0:i,this._y=r,this.cb=t,this.scope=e}P.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},P.prototype.set=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},P.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},P.prototype.apply=function(t,e){e=e||new ho;var i=t.x,t=t.y;return e.x=this.a*i+this.c*t+this.tx,e.y=this.b*i+this.d*t+this.ty,e},P.prototype.applyInverse=function(t,e){e=e||new ho;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,t=t.y;return e.x=this.d*i*r+-this.c*i*t+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*t+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},P.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},P.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},P.prototype.rotate=function(t){var e=Math.cos(t),t=Math.sin(t),i=this.a,r=this.c,n=this.tx;return this.a=i*e-this.b*t,this.b=i*t+this.b*e,this.c=r*e-this.d*t,this.d=r*t+this.d*e,this.tx=n*e-this.ty*t,this.ty=n*t+this.ty*e,this},P.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},P.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},P.prototype.prepend=function(t){var e,i,r=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,i=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d),this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},P.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=-Math.atan2(-r,n),o=Math.atan2(i,e),a=Math.abs(s+o);return a<1e-5||Math.abs(no-a)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},P.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},P.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},P.prototype.clone=function(){var t=new P;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},P.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},P.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(P,"IDENTITY",{get:function(){return new P},enumerable:!1,configurable:!0}),Object.defineProperty(P,"TEMP_MATRIX",{get:function(){return new P},enumerable:!1,configurable:!0});var po=P;function P(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s}var fo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],yo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_o=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],vo=[],go=[],xo=Math.sign;for(var C=0;C<16;C++){var bo=[];vo.push(bo);for(var Eo=0;Eo<16;Eo++)for(var To=xo(fo[C]*fo[Eo]+yo[C]*mo[Eo]),wo=xo(mo[C]*fo[Eo]+_o[C]*mo[Eo]),Ao=xo(fo[C]*yo[Eo]+yo[C]*_o[Eo]),Oo=xo(mo[C]*yo[Eo]+_o[C]*_o[Eo]),Io=0;Io<16;Io++)if(fo[Io]===To&&mo[Io]===wo&&yo[Io]===Ao&&_o[Io]===Oo){bo.push(Io);break}}for(C=0;C<16;C++){var Ro=new po;Ro.set(fo[C],mo[C],yo[C],_o[C],0,0),go.push(Ro)}Po.prototype.onChange=function(){this._localID++},Po.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Po.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},Po.prototype.updateTransform=function(t){var e,i,r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(i=this.worldTransform).a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},Po.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(Po.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),Po.IDENTITY=new Po;var So=Po;function Po(){this.worldTransform=new po,this.localTransform=new po,this.position=new lo(this.onChange,this,0,0),this.scale=new lo(this.onChange,this,1,1),this.pivot=new lo(this.onChange,this,0,0),this.skew=new lo(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}ro.RETINA_PREFIX=/@([0-9\.]+)x/;ro.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;!function(){for(var t=[],e=[],i=0;i<32;i++)e[t[i]=i]=i;t[to.NORMAL_NPM]=to.NORMAL,t[to.ADD_NPM]=to.ADD,t[to.SCREEN_NPM]=to.SCREEN,e[to.NORMAL]=to.NORMAL_NPM,e[to.ADD]=to.ADD_NPM,e[to.SCREEN]=to.SCREEN_NPM;var r=[];r.push(e),r.push(t)}();Float32Array,Uint32Array,Int32Array,Uint8Array;function Co(t,e,i){var r=t.length;if(!(r<=e||0===i)){for(var n=r-(i=r<e+i?r-e:i),s=e;s<n;++s)t[s]=t[s+i];t.length=n}}function Mo(t){return 0===t?0:t<0?-1:1}Object.create(null),Object.create(null);No.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},No.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},No.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(No.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(No.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0});function No(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||ro.RESOLUTION,this.resize(t,e)}ro.SORTABLE_CHILDREN=!1;M.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},M.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},M.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?ao.EMPTY:((t=t||new ao(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},M.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},M.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,s=t[0],o=t[1],e=s<e?s:e,i=o<i?o:i,r=r<s?s:r,n=n<o?o:n;e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,r=r<s?s:r,n=n<o?o:n,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,r=r<s?s:r,n=n<o?o:n,s=t[6],i=(o=t[7])<i?o:i,r=r<s?s:r,n=n<o?o:n,this.minX=e=s<e?s:e,this.minY=i,this.maxX=r,this.maxY=n},M.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},M.prototype.addFrameMatrix=function(t,e,i,r,n){var s=t.a,o=t.b,a=t.c,h=t.d,u=t.tx,t=t.ty,l=s*e+a*i+u,c=o*e+h*i+t,d=l<(d=this.minX)?l:d,p=c<(p=this.minY)?c:p,f=(f=this.maxX)<l?l:f,m=(m=this.maxY)<c?c:m;d=(l=s*r+a*i+u)<d?l:d,p=(c=o*r+h*i+t)<p?c:p,f=f<l?l:f,m=m<c?c:m,d=(l=s*e+a*n+u)<d?l:d,p=(c=o*e+h*n+t)<p?c:p,m=m<c?c:m,p=(c=o*r+h*n+t)<p?c:p,f=(f=f<l?l:f)<(l=s*r+a*n+u)?l:f,m=m<c?c:m,this.minX=d=l<d?l:d,this.minY=p,this.maxX=f,this.maxY=m},M.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2)var h=t[a],u=t[a+1],r=h<r?h:r,n=u<n?u:n,s=s<h?h:s,o=o<u?u:o;this.minX=r,this.minY=n,this.maxX=s,this.maxY=o},M.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},M.prototype.addVerticesMatrix=function(t,e,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,y=i;y<r;y+=2)var _=e[y],v=e[y+1],g=o*_+h*v+l,v=u*v+a*_+c,d=Math.min(d,g-n),f=Math.max(f,g+n),p=Math.min(p,v-s),m=Math.max(m,v+s);this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},M.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},M.prototype.addBoundsMask=function(t,e){var i,r,n,s=(t.minX>e.minX?t:e).minX,o=(t.minY>e.minY?t:e).minY,a=(t.maxX<e.maxX?t:e).maxX,t=(t.maxY<e.maxY?t:e).maxY;s<=a&&o<=t&&(e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,this.minX=s<e?s:e,this.minY=o<i?o:i,this.maxX=r<a?a:r,this.maxY=n<t?t:n)},M.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},M.prototype.addBoundsArea=function(t,e){var i,r,n,s=t.minX>e.x?t.minX:e.x,o=t.minY>e.y?t.minY:e.y,a=t.maxX<e.x+e.width?t.maxX:e.x+e.width,t=t.maxY<e.y+e.height?t.maxY:e.y+e.height;s<=a&&o<=t&&(e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,this.minX=s<e?s:e,this.minY=o<i?o:i,this.maxX=r<a?a:r,this.maxY=n<t?t:n)},M.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},M.prototype.addFramePad=function(t,e,i,r,n,s){e-=s,i+=n,r+=s,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r};var Lo=M;function M(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var Do=function(t,e){return(Do=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Uo(t,e){function i(){this.constructor=t}Do(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}Uo(N,Fo=Ct.a),N.mixin=function(t){for(var e=Object.keys(t),i=0;i<e.length;++i){var r=e[i];Object.defineProperty(N.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},N.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},N.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},N.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new ao),e=this._boundsRect),this._bounds.getRectangle(e)},N.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new ao),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Lo);var e=this.transform,i=this.parent,r=(this.parent=null,this.transform=this._tempDisplayObjectParent.transform,this._bounds),n=this._boundsID,t=(this._bounds=this._localBounds,this.getBounds(!1,t));return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-n,t},N.prototype.toGlobal=function(t,e,i){return(i=void 0===i?!1:i)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},N.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},N.prototype.setParent=function(t){if(t&&t.addChild)return t.addChild(this),t;throw new Error("setParent: Argument must be a Container")},N.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},N.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(N.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Xo),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),N.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},N.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(N.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"angle",{get:function(){return this.transform.rotation*so},set:function(t){this.transform.rotation=t*oo},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0});var Fo,Bo=N;function N(){var t=Fo.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new So,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Lo,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}Uo(jo,ko=Bo);var ko,Xo=jo;function jo(){var t=null!==ko&&ko.apply(this,arguments)||this;return t.sortDirty=null,t}function Yo(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Bo.prototype.displayObjectUpdateTransform=Bo.prototype.updateTransform;Uo(L,Go=Bo),L.prototype.onChildrenChange=function(t){},L.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(1<e.length)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},L.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},L.prototype.swapChildren=function(t,e){var i,r;t!==e&&(i=this.getChildIndex(t),r=this.getChildIndex(e),this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r))},L.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},L.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Co(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},L.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},L.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(1<e.length)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Co(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},L.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Co(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},L.prototype.removeChildren=function(t,e){var i=t=void 0===t?0:t,r=(e=void 0===e?this.children.length:e)-i;if(0<r&&r<=e){for(var n=this.children.splice(i,r),s=0;s<n.length;++s)n[s].parent=null,n[s].transform&&(n[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(s=0;s<n.length;++s)n[s].emit("removed",this),this.emit("childRemoved",n[s],this,s);return n}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},L.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(Yo),this.sortDirty=!1},L.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},L.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,i=this.children[t];i.visible&&i.renderable&&(i.calculateBounds(),i._mask?((e=i._mask.maskObject||i._mask).calculateBounds(),this._bounds.addBoundsMask(i._bounds,e._bounds)):i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds))}this._bounds.updateID=this._boundsID},L.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=Go.prototype.getLocalBounds.call(this,t);if(!e)for(var i=0,r=this.children.length;i<r;++i){var n=this.children[i];n.visible&&n.updateTransform()}return t},L.prototype._calculateBounds=function(){},L.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},L.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var r=this._enabledFilters.length=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var r=0,n=this.children.length;r<n;r++)this.children[r].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},L.prototype._render=function(t){},L.prototype.destroy=function(t){Go.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(e)for(var r=0;r<i.length;++r)i[r].destroy(t)},Object.defineProperty(L.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0});var Go,x=L;function L(){var t=Go.call(this)||this;return t.children=[],t.sortableChildren=ro.SORTABLE_CHILDREN,t.sortDirty=!1,t}x.prototype.containerUpdateTransform=x.prototype.updateTransform;var Ho=function(t,e){return(Ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Vo,zo,Wo=new ho,qo=new Uint16Array([0,1,2,0,2,3]),Ko=(Ho(zo=D,E=Vo=x),zo.prototype=null===E?Object.create(E):(Zo.prototype=E.prototype,new Zo),D.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Mo(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Mo(this.scale.y)*this._height/this._texture.orig.height)},D.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},D.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,s=e.d,o=e.tx,e=e.ty,a=this.vertexData,h=t.trim,t=t.orig,u=this._anchor,l=0,c=0,d=0,p=0,d=h?(l=(c=h.x-u._x*t.width)+h.width,(p=h.y-u._y*t.height)+h.height):(l=(c=-u._x*t.width)+t.width,(p=-u._y*t.height)+t.height);if(a[0]=i*c+n*p+o,a[1]=s*p+r*c+e,a[2]=i*l+n*p+o,a[3]=s*p+r*l+e,a[4]=i*l+n*d+o,a[5]=s*d+r*l+e,a[6]=i*c+n*d+o,a[7]=s*d+r*c+e,this._roundPixels)for(var f=ro.RESOLUTION,m=0;m<a.length;++m)a[m]=Math.round((a[m]*f|0)/f)}},D.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,t=t.orig,i=this._anchor,r=this.transform.worldTransform,n=r.a,s=r.b,o=r.c,a=r.d,h=r.tx,r=r.ty,u=-i._x*t.width,l=u+t.width,i=-i._y*t.height,t=i+t.height;e[0]=n*u+o*i+h,e[1]=a*i+s*u+r,e[2]=n*l+o*i+h,e[3]=a*i+s*l+r,e[4]=n*l+o*t+h,e[5]=a*t+s*l+r,e[6]=n*u+o*t+h,e[7]=a*t+s*u+r},D.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},D.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},D.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ao),t=this._localBoundsRect),this._bounds.getRectangle(t)):Vo.prototype.getLocalBounds.call(this,t)},D.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Wo);var t=this._texture.orig.width,e=this._texture.orig.height,i=-t*this.anchor.x;return Wo.x>=i&&Wo.x<i+t&&(i=-e*this.anchor.y,Wo.y>=i&&Wo.y<i+e)},D.prototype.destroy=function(t){Vo.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null},D.from=function(t,e){return new D(t instanceof zi?t:zi.from(t,e))},Object.defineProperty(D.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Mo(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Mo(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||zi.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),D);function Zo(){this.constructor=zo}function D(t){var e=Vo.call(this)||this;return e._anchor=new lo(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=to.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||zi.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=qo,e.pluginName="batch",e.isSprite=!0,e._roundPixels=ro.ROUND_PIXELS,e}cs.registerPlugin("batch",Pi),n.registerPlugin(Ce),n.registerPlugin(F);var Jo=new n({width:window.innerWidth,height:window.innerHeight});document.body.appendChild(Jo.view),Jo.loader.add("logo","./assets/logo.png"),Jo.loader.load(function(){var e=Ko.from("logo");e.anchor.set(.5),Jo.stage.addChild(e),e.x=.5*Jo.screen.width,e.y=.5*Jo.screen.height,Jo.ticker.add(function(t){e.rotation+=.22*t})})}]);